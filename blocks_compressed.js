// Do not edit this file; automatically generated by build.py.
'use strict';


// Copyright 2012 Google Inc.  Apache License 2.0
Blockly.Blocks.colour={};Blockly.Blocks.colour.HUE=20;Blockly.Blocks.colour_picker={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",colour:Blockly.Blocks.colour.HUE,helpUrl:Blockly.Msg.COLOUR_PICKER_HELPURL});var a=this;this.setTooltip(function(){var b=a.getParent();return b&&b.getInputsInline()&&b.tooltip||Blockly.Msg.COLOUR_PICKER_TOOLTIP})}};
Blockly.Blocks.colour_random={init:function(){this.jsonInit({message0:Blockly.Msg.COLOUR_RANDOM_TITLE,output:"Colour",colour:Blockly.Blocks.colour.HUE,tooltip:Blockly.Msg.COLOUR_RANDOM_TOOLTIP,helpUrl:Blockly.Msg.COLOUR_RANDOM_HELPURL})}};
Blockly.Blocks.colour_rgb={init:function(){this.setHelpUrl(Blockly.Msg.COLOUR_RGB_HELPURL);this.setColour(Blockly.Blocks.colour.HUE);this.appendValueInput("RED").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_TITLE).appendField(Blockly.Msg.COLOUR_RGB_RED);this.appendValueInput("GREEN").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_GREEN);this.appendValueInput("BLUE").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_BLUE);
this.setOutput(!0,"Colour");this.setTooltip(Blockly.Msg.COLOUR_RGB_TOOLTIP)}};
Blockly.Blocks.colour_blend={init:function(){this.setHelpUrl(Blockly.Msg.COLOUR_BLEND_HELPURL);this.setColour(Blockly.Blocks.colour.HUE);this.appendValueInput("COLOUR1").setCheck("Colour").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_TITLE).appendField(Blockly.Msg.COLOUR_BLEND_COLOUR1);this.appendValueInput("COLOUR2").setCheck("Colour").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_COLOUR2);this.appendValueInput("RATIO").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_RATIO);
this.setOutput(!0,"Colour");this.setTooltip(Blockly.Msg.COLOUR_BLEND_TOOLTIP)}};Blockly.Blocks.lists={};Blockly.Blocks.lists.HUE=260;Blockly.Blocks.lists_create_empty={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_CREATE_EMPTY_TITLE,output:"Array",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP,helpUrl:Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL})}};
Blockly.Blocks.lists_create_with={init:function(){this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.itemCount_=3;this.updateShape_();this.setOutput(!0,"Array");this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),
10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("ADD"+b).connection.targetConnection;
c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"ADD"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||
this.appendDummyInput("EMPTY").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE);for(var a=0;a<this.itemCount_;a++)if(!this.getInput("ADD"+a)){var b=this.appendValueInput("ADD"+a);0==a&&b.appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++}};
Blockly.Blocks.lists_create_with_container={init:function(){this.setColour(Blockly.Blocks.lists.HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.lists_create_with_item={init:function(){this.setColour(Blockly.Blocks.lists.HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.lists_repeat={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_REPEAT_TITLE,args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_REPEAT_TOOLTIP,helpUrl:Blockly.Msg.LISTS_REPEAT_HELPURL})}};
Blockly.Blocks.lists_length={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.LISTS_LENGTH_HELPURL})}};
Blockly.Blocks.lists_isEmpty={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.LISTS_ISEMPTY_HELPURL})}};
Blockly.Blocks.lists_indexOf={init:function(){var a=[[Blockly.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.setOutput(!0,"Number");this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);this.appendValueInput("FIND").appendField(new Blockly.FieldDropdown(a),"END");this.setInputsInline(!0);this.setTooltip(function(){return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",
this.workspace.options.oneBasedIndex?"0":"-1")})}};
Blockly.Blocks.lists_getIndex={init:function(){var a=[[Blockly.Msg.LISTS_GET_INDEX_GET,"GET"],[Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Blockly.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL);
this.setColour(Blockly.Blocks.lists.HUE);a=new Blockly.FieldDropdown(a,function(a){this.sourceBlock_.updateStatement_("REMOVE"==a)});this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendField(a,"MODE").appendField("","SPACE");this.appendDummyInput("AT");Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL);this.setInputsInline(!0);this.setOutput(!0);this.updateAt_(!0);
var b=this;this.setTooltip(function(){var a=b.getFieldValue("MODE"),d=b.getFieldValue("WHERE"),e="";switch(a+" "+d){case "GET FROM_START":case "GET FROM_END":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case "GET FIRST":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case "GET LAST":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case "GET RANDOM":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case "GET_REMOVE FROM_START":case "GET_REMOVE FROM_END":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;
break;case "GET_REMOVE FIRST":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case "GET_REMOVE LAST":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case "GET_REMOVE RANDOM":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case "REMOVE FROM_START":case "REMOVE FROM_END":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case "REMOVE FIRST":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case "REMOVE LAST":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;
break;case "REMOVE RANDOM":e=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}if("FROM_START"==d||"FROM_END"==d)e+="  "+("FROM_START"==d?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",b.workspace.options.oneBasedIndex?"#1":"#0");return e})},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("statement",!this.outputConnection);var b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){var b=
"true"==a.getAttribute("statement");this.updateStatement_(b);a="false"!=a.getAttribute("at");this.updateAt_(a)},updateStatement_:function(a){a!=!this.outputConnection&&(this.unplug(!0,!0),a?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(a){this.removeInput("AT");this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&
this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var b=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(b){var c="FROM_START"==b||"FROM_END"==b;if(c!=a){var e=this.sourceBlock_;e.updateAt_(c);e.setFieldValue(b,"WHERE");return null}});this.getInput("AT").appendField(b,"WHERE");Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};
Blockly.Blocks.lists_setIndex={init:function(){var a=[[Blockly.Msg.LISTS_SET_INDEX_SET,"SET"],[Blockly.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);
this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"MODE").appendField("","SPACE");this.appendDummyInput("AT");this.appendValueInput("TO").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP);this.updateAt_(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("MODE"),d=b.getFieldValue("WHERE"),e="";switch(a+" "+d){case "SET FROM_START":case "SET FROM_END":e=
Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case "SET FIRST":e=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case "SET LAST":e=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case "SET RANDOM":e=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case "INSERT FROM_START":case "INSERT FROM_END":e=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case "INSERT FIRST":e=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case "INSERT LAST":e=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;
break;case "INSERT RANDOM":e=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}if("FROM_START"==d||"FROM_END"==d)e+="  "+Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",b.workspace.options.oneBasedIndex?"#1":"#0");return e})},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){a="false"!=a.getAttribute("at");this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT");
this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var b=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(b){var c="FROM_START"==b||"FROM_END"==b;if(c!=a){var e=this.sourceBlock_;e.updateAt_(c);e.setFieldValue(b,"WHERE");return null}});this.moveInputBefore("AT","TO");this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL",
"TO");this.getInput("AT").appendField(b,"WHERE")}};
Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);
this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL);this.setInputsInline(!0);this.setOutput(!0,"Array");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT1").type==
Blockly.INPUT_VALUE;a.setAttribute("at1",b);b=this.getInput("AT2").type==Blockly.INPUT_VALUE;a.setAttribute("at2",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2");this.updateAt_(1,b);this.updateAt_(2,a)},updateAt_:function(a,b){this.removeInput("AT"+a);this.removeInput("ORDINAL"+a,!0);b?(this.appendValueInput("AT"+a).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):
this.appendDummyInput("AT"+a);var c=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+a],function(c){var d="FROM_START"==c||"FROM_END"==c;if(d!=b){var f=this.sourceBlock_;f.updateAt_(a,d);f.setFieldValue(c,"WHERE"+a);return null}});this.getInput("AT"+a).appendField(c,"WHERE"+a);1==a&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"));Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};
Blockly.Blocks.lists_sort={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[Blockly.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[Blockly.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",colour:Blockly.Blocks.lists.HUE,
tooltip:Blockly.Msg.LISTS_SORT_TOOLTIP,helpUrl:Blockly.Msg.LISTS_SORT_HELPURL})}};
Blockly.Blocks.lists_split={init:function(){var a=this,b=new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(b){a.updateType_(b)});this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.appendValueInput("INPUT").setCheck("String").appendField(b,"MODE");this.appendValueInput("DELIM").setCheck("String").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER);this.setInputsInline(!0);
this.setOutput(!0,"Array");this.setTooltip(function(){var b=a.getFieldValue("MODE");if("SPLIT"==b)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==b)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw"Unknown mode: "+b;})},updateType_:function(a){"SPLIT"==a?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("mode",
this.getFieldValue("MODE"));return a},domToMutation:function(a){this.updateType_(a.getAttribute("mode"))}};Blockly.Blocks.logic={};Blockly.Blocks.logic.HUE=210;
Blockly.Blocks.controls_if={init:function(){this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.appendValueInput("IF0").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendStatementInput("DO0").appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var a=this;this.setTooltip(function(){if(a.elseifCount_||a.elseCount_){if(!a.elseifCount_&&
a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_2;if(a.elseifCount_&&!a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_3;if(a.elseifCount_&&a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_4}else return Blockly.Msg.CONTROLS_IF_TOOLTIP_1;return""});this.elseCount_=this.elseifCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var a=document.createElement("mutation");this.elseifCount_&&a.setAttribute("elseif",this.elseifCount_);this.elseCount_&&a.setAttribute("else",
1);return a},domToMutation:function(a){this.elseifCount_=parseInt(a.getAttribute("elseif"),10)||0;this.elseCount_=parseInt(a.getAttribute("else"),10)||0;this.updateShape_()},decompose:function(a){var b=a.newBlock("controls_if_if");b.initSvg();for(var c=b.nextConnection,d=1;d<=this.elseifCount_;d++){var e=a.newBlock("controls_if_elseif");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}this.elseCount_&&(a=a.newBlock("controls_if_else"),a.initSvg(),c.connect(a.previousConnection));return b},
compose:function(a){var b=a.nextConnection.targetBlock();this.elseCount_=this.elseifCount_=0;a=[null];for(var c=[null],d=null;b;){switch(b.type){case "controls_if_elseif":this.elseifCount_++;a.push(b.valueConnection_);c.push(b.statementConnection_);break;case "controls_if_else":this.elseCount_++;d=b.statementConnection_;break;default:throw"Unknown block type.";}b=b.nextConnection&&b.nextConnection.targetBlock()}this.updateShape_();for(b=1;b<=this.elseifCount_;b++)Blockly.Mutator.reconnect(a[b],this,
"IF"+b),Blockly.Mutator.reconnect(c[b],this,"DO"+b);Blockly.Mutator.reconnect(d,this,"ELSE")},saveConnections:function(a){a=a.nextConnection.targetBlock();for(var b=1;a;){switch(a.type){case "controls_if_elseif":var c=this.getInput("IF"+b),d=this.getInput("DO"+b);a.valueConnection_=c&&c.connection.targetConnection;a.statementConnection_=d&&d.connection.targetConnection;b++;break;case "controls_if_else":d=this.getInput("ELSE");a.statementConnection_=d&&d.connection.targetConnection;break;default:throw"Unknown block type.";
}a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var a=1;this.getInput("IF"+a);)this.removeInput("IF"+a),this.removeInput("DO"+a),a++;for(a=1;a<=this.elseifCount_;a++)this.appendValueInput("IF"+a).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+a).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)}};
Blockly.Blocks.controls_if_if={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_IF_TITLE_IF);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_elseif={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_else={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.logic_compare={init:function(){var a=[["=","EQ"],["\u2260","NEQ"],["\u200f<\u200f","LT"],["\u200f\u2264\u200f","LTE"],["\u200f>\u200f","GT"],["\u200f\u2265\u200f","GTE"]],b=[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"]],a=this.RTL?a:b;this.setHelpUrl(Blockly.Msg.LOGIC_COMPARE_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.setOutput(!0,"Boolean");this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(a),
"OP");this.setInputsInline(!0);var c=this;this.setTooltip(function(){var a=c.getFieldValue("OP");return{EQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE}[a]});this.prevBlocks_=[null,null]},onchange:function(a){var b=this.getInputTargetBlock("A"),c=this.getInputTargetBlock("B");if(b&&c&&!b.outputConnection.checkType_(c.outputConnection)){Blockly.Events.setGroup(a.group);
for(a=0;a<this.prevBlocks_.length;a++){var d=this.prevBlocks_[a];if(d===b||d===c)d.unplug(),d.bumpNeighbours_()}Blockly.Events.setGroup(!1)}this.prevBlocks_[0]=b;this.prevBlocks_[1]=c}};
Blockly.Blocks.logic_operation={init:function(){var a=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,"OR"]];this.setHelpUrl(Blockly.Msg.LOGIC_OPERATION_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.setOutput(!0,"Boolean");this.appendValueInput("A").setCheck("Boolean");this.appendValueInput("B").setCheck("Boolean").appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{AND:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,
OR:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR}[a]})}};Blockly.Blocks.logic_negate={init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NEGATE_TITLE,args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",colour:Blockly.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NEGATE_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NEGATE_HELPURL})}};
Blockly.Blocks.logic_boolean={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]]}],output:"Boolean",colour:Blockly.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_BOOLEAN_HELPURL})}};
Blockly.Blocks.logic_null={init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NULL,output:null,colour:Blockly.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NULL_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NULL_HELPURL})}};
Blockly.Blocks.logic_ternary={init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_TERNARY_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.appendValueInput("IF").setCheck("Boolean").appendField(Blockly.Msg.LOGIC_TERNARY_CONDITION);this.appendValueInput("THEN").appendField(Blockly.Msg.LOGIC_TERNARY_IF_TRUE);this.appendValueInput("ELSE").appendField(Blockly.Msg.LOGIC_TERNARY_IF_FALSE);this.setOutput(!0);this.setTooltip(Blockly.Msg.LOGIC_TERNARY_TOOLTIP);this.prevParentConnection_=null},onchange:function(a){var b=
this.getInputTargetBlock("THEN"),c=this.getInputTargetBlock("ELSE"),d=this.outputConnection.targetConnection;if((b||c)&&d)for(var e=0;2>e;e++){var f=1==e?b:c;f&&!f.outputConnection.checkType_(d)&&(Blockly.Events.setGroup(a.group),d===this.prevParentConnection_?(this.unplug(),d.getSourceBlock().bumpNeighbours_()):(f.unplug(),f.bumpNeighbours_()),Blockly.Events.setGroup(!1))}this.prevParentConnection_=d}};Blockly.Blocks.loops={};Blockly.Blocks.loops.HUE=120;Blockly.Blocks.controls_repeat_ext={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_REPEAT_TITLE,args0:[{type:"input_value",name:"TIMES",check:"Number"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,tooltip:Blockly.Msg.CONTROLS_REPEAT_TOOLTIP,helpUrl:Blockly.Msg.CONTROLS_REPEAT_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_REPEAT_INPUT_DO)}};
Blockly.Blocks.controls_repeat={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_REPEAT_TITLE,args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,tooltip:Blockly.Msg.CONTROLS_REPEAT_TOOLTIP,helpUrl:Blockly.Msg.CONTROLS_REPEAT_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_REPEAT_INPUT_DO)}};
Blockly.Blocks.controls_whileUntil={init:function(){var a=[[Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE,"WHILE"],[Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,"UNTIL"]];this.setHelpUrl(Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL);this.setColour(Blockly.Blocks.loops.HUE);this.appendValueInput("BOOL").setCheck("Boolean").appendField(new Blockly.FieldDropdown(a),"MODE");this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO);this.setPreviousStatement(!0);this.setNextStatement(!0);
var b=this;this.setTooltip(function(){var a=b.getFieldValue("MODE");return{WHILE:Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,UNTIL:Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}[a]})}};
Blockly.Blocks.controls_for={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_FOR_TITLE,args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,helpUrl:Blockly.Msg.CONTROLS_FOR_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_FOR_INPUT_DO);
var a=this;this.setTooltip(function(){return Blockly.Msg.CONTROLS_FOR_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})},customContextMenu:function(a){if(!this.isCollapsed()){var b={enabled:!0},c=this.getFieldValue("VAR");b.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",c);c=goog.dom.createDom("field",null,c);c.setAttribute("name","VAR");c=goog.dom.createDom("block",null,c);c.setAttribute("type","variables_get");b.callback=Blockly.ContextMenu.callbackFactory(this,c);a.push(b)}}};
Blockly.Blocks.controls_forEach={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_FOREACH_TITLE,args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,helpUrl:Blockly.Msg.CONTROLS_FOREACH_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_FOREACH_INPUT_DO);var a=this;this.setTooltip(function(){return Blockly.Msg.CONTROLS_FOREACH_TOOLTIP.replace("%1",
a.getFieldValue("VAR"))})},customContextMenu:Blockly.Blocks.controls_for.customContextMenu};
Blockly.Blocks.controls_flow_statements={init:function(){var a=[[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,"BREAK"],[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,"CONTINUE"]];this.setHelpUrl(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL);this.setColour(Blockly.Blocks.loops.HUE);this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"FLOW");this.setPreviousStatement(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("FLOW");return{BREAK:Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,
CONTINUE:Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}[a]})},onchange:function(a){if(!this.workspace.isDragging()){a=!1;var b=this;do{if(-1!=this.LOOP_TYPES.indexOf(b.type)){a=!0;break}b=b.getSurroundParent()}while(b);a?(this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))}},LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach",
"controls_for","controls_whileUntil"]};Blockly.Blocks.math={};Blockly.Blocks.math.HUE=230;Blockly.Blocks.math_number={init:function(){this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.appendDummyInput().appendField(new Blockly.FieldNumber("0"),"NUM");this.setOutput(!0,"Number");var a=this;this.setTooltip(function(){var b=a.getParent();return b&&b.getInputsInline()&&b.tooltip||Blockly.Msg.MATH_NUMBER_TOOLTIP})}};
Blockly.Blocks.math_arithmetic={init:function(){this.jsonInit({message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"],[Blockly.Msg.MATH_POWER_SYMBOL,"POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Blocks.math.HUE,
helpUrl:Blockly.Msg.MATH_ARITHMETIC_HELPURL});var a=this;this.setTooltip(function(){var b=a.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE,POWER:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER}[b]})}};
Blockly.Blocks.math_single={init:function(){this.jsonInit({message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[[Blockly.Msg.MATH_SINGLE_OP_ROOT,"ROOT"],[Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",colour:Blockly.Blocks.math.HUE,helpUrl:Blockly.Msg.MATH_SINGLE_HELPURL});var a=this;this.setTooltip(function(){var b=a.getFieldValue("OP");return{ROOT:Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT,
ABS:Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG,LN:Blockly.Msg.MATH_SINGLE_TOOLTIP_LN,LOG10:Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10,EXP:Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP,POW10:Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10}[b]})}};
Blockly.Blocks.math_trig={init:function(){this.jsonInit({message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[[Blockly.Msg.MATH_TRIG_SIN,"SIN"],[Blockly.Msg.MATH_TRIG_COS,"COS"],[Blockly.Msg.MATH_TRIG_TAN,"TAN"],[Blockly.Msg.MATH_TRIG_ASIN,"ASIN"],[Blockly.Msg.MATH_TRIG_ACOS,"ACOS"],[Blockly.Msg.MATH_TRIG_ATAN,"ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",colour:Blockly.Blocks.math.HUE,helpUrl:Blockly.Msg.MATH_TRIG_HELPURL});var a=this;this.setTooltip(function(){var b=
a.getFieldValue("OP");return{SIN:Blockly.Msg.MATH_TRIG_TOOLTIP_SIN,COS:Blockly.Msg.MATH_TRIG_TOOLTIP_COS,TAN:Blockly.Msg.MATH_TRIG_TOOLTIP_TAN,ASIN:Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN,ACOS:Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS,ATAN:Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN}[b]})}};
Blockly.Blocks.math_constant={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\u00bd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_CONSTANT_TOOLTIP,helpUrl:Blockly.Msg.MATH_CONSTANT_HELPURL})}};
Blockly.Blocks.math_number_property={init:function(){var a=[[Blockly.Msg.MATH_IS_EVEN,"EVEN"],[Blockly.Msg.MATH_IS_ODD,"ODD"],[Blockly.Msg.MATH_IS_PRIME,"PRIME"],[Blockly.Msg.MATH_IS_WHOLE,"WHOLE"],[Blockly.Msg.MATH_IS_POSITIVE,"POSITIVE"],[Blockly.Msg.MATH_IS_NEGATIVE,"NEGATIVE"],[Blockly.Msg.MATH_IS_DIVISIBLE_BY,"DIVISIBLE_BY"]];this.setColour(Blockly.Blocks.math.HUE);this.appendValueInput("NUMBER_TO_CHECK").setCheck("Number");a=new Blockly.FieldDropdown(a,function(a){this.sourceBlock_.updateShape_("DIVISIBLE_BY"==
a)});this.appendDummyInput().appendField(a,"PROPERTY");this.setInputsInline(!0);this.setOutput(!0,"Boolean");this.setTooltip(Blockly.Msg.MATH_IS_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");a.setAttribute("divisor_input",b);return a},domToMutation:function(a){a="true"==a.getAttribute("divisor_input");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("DIVISOR");a?b||this.appendValueInput("DIVISOR").setCheck("Number"):
b&&this.removeInput("DIVISOR")}};Blockly.Blocks.math_change={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CHANGE_TITLE,args0:[{type:"field_variable",name:"VAR",variable:Blockly.Msg.MATH_CHANGE_TITLE_ITEM},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.variables.HUE,helpUrl:Blockly.Msg.MATH_CHANGE_HELPURL});var a=this;this.setTooltip(function(){return Blockly.Msg.MATH_CHANGE_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})}};
Blockly.Blocks.math_round={init:function(){this.jsonInit({message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[[Blockly.Msg.MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_ROUND_TOOLTIP,helpUrl:Blockly.Msg.MATH_ROUND_HELPURL})}};
Blockly.Blocks.math_on_list={init:function(){var a=[[Blockly.Msg.MATH_ONLIST_OPERATOR_SUM,"SUM"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MIN,"MIN"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MAX,"MAX"],[Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE,"AVERAGE"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN,"MEDIAN"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MODE,"MODE"],[Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV,"STD_DEV"],[Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM,"RANDOM"]],b=this;this.setHelpUrl(Blockly.Msg.MATH_ONLIST_HELPURL);this.setColour(Blockly.Blocks.math.HUE);
this.setOutput(!0,"Number");a=new Blockly.FieldDropdown(a,function(a){b.updateType_(a)});this.appendValueInput("LIST").setCheck("Array").appendField(a,"OP");this.setTooltip(function(){var a=b.getFieldValue("OP");return{SUM:Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM,MIN:Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN,MAX:Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX,AVERAGE:Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE,MEDIAN:Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN,MODE:Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE,STD_DEV:Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV,
RANDOM:Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM}[a]})},updateType_:function(a){"MODE"==a?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("op",this.getFieldValue("OP"));return a},domToMutation:function(a){this.updateType_(a.getAttribute("op"))}};
Blockly.Blocks.math_modulo={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_MODULO_TITLE,args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_MODULO_TOOLTIP,helpUrl:Blockly.Msg.MATH_MODULO_HELPURL})}};
Blockly.Blocks.math_constrain={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CONSTRAIN_TITLE,args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_CONSTRAIN_TOOLTIP,helpUrl:Blockly.Msg.MATH_CONSTRAIN_HELPURL})}};
Blockly.Blocks.math_random_int={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_RANDOM_INT_TITLE,args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_RANDOM_INT_TOOLTIP,helpUrl:Blockly.Msg.MATH_RANDOM_INT_HELPURL})}};
Blockly.Blocks.math_random_float={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM,output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP,helpUrl:Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL})}};Blockly.Blocks.procedures={};Blockly.Blocks.procedures.HUE=290;
Blockly.Blocks.procedures_defnoreturn={init:function(){var a=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Procedures.rename);a.setSpellcheck(!1);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a,"NAME").appendField("","PARAMS");this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"]));(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&
Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);this.arguments_=[];this.setStatements_(!0);this.statementConnection_=null},setStatements_:function(a){this.hasStatements_!==a&&(a?(this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&
this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=a)},updateParams_:function(){for(var a=!1,b={},c=0;c<this.arguments_.length;c++){if(b["arg_"+this.arguments_[c].toLowerCase()]){a=!0;break}b["arg_"+this.arguments_[c].toLowerCase()]=!0}a?this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING):this.setWarningText(null);a="";this.arguments_.length&&(a=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", "));Blockly.Events.disable();try{this.setFieldValue(a,
"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(a){var b=document.createElement("mutation");a&&b.setAttribute("name",this.getFieldValue("NAME"));for(var c=0;c<this.arguments_.length;c++){var d=document.createElement("arg");d.setAttribute("name",this.arguments_[c]);a&&this.paramIds_&&d.setAttribute("paramId",this.paramIds_[c]);b.appendChild(d)}this.hasStatements_||b.setAttribute("statements","false");return b},domToMutation:function(a){this.arguments_=[];for(var b=0,c;c=a.childNodes[b];b++)"arg"==
c.nodeName.toLowerCase()&&this.arguments_.push(c.getAttribute("name"));this.updateParams_();Blockly.Procedures.mutateCallers(this);this.setStatements_("false"!==a.getAttribute("statements"))},decompose:function(a){var b=a.newBlock("procedures_mutatorcontainer");b.initSvg();this.getInput("RETURN")?b.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):b.getInput("STATEMENT_INPUT").setVisible(!1);for(var c=b.getInput("STACK").connection,d=0;d<this.arguments_.length;d++){var e=a.newBlock("procedures_mutatorarg");
e.initSvg();e.setFieldValue(this.arguments_[d],"NAME");e.oldLocation=d;c.connect(e.previousConnection);c=e.nextConnection}Blockly.Procedures.mutateCallers(this);return b},compose:function(a){this.arguments_=[];this.paramIds_=[];for(var b=a.getInputTargetBlock("STACK");b;)this.arguments_.push(b.getFieldValue("NAME")),this.paramIds_.push(b.id),b=b.nextConnection&&b.nextConnection.targetBlock();this.updateParams_();Blockly.Procedures.mutateCallers(this);a=a.getFieldValue("STATEMENTS");if(null!==a&&(a=
"TRUE"==a,this.hasStatements_!=a))if(a)this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null;else{a=this.getInput("STACK").connection;if(this.statementConnection_=a.targetConnection)a=a.targetBlock(),a.unplug(),a.bumpNeighbours_();this.setStatements_(!1)}},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},renameVar:function(a,b){for(var c=!1,d=0;d<this.arguments_.length;d++)Blockly.Names.equals(a,
this.arguments_[d])&&(this.arguments_[d]=b,c=!0);if(c&&(this.updateParams_(),this.mutator.isVisible()))for(var c=this.mutator.workspace_.getAllBlocks(),d=0,e;e=c[d];d++)"procedures_mutatorarg"==e.type&&Blockly.Names.equals(a,e.getFieldValue("NAME"))&&e.setFieldValue(b,"NAME")},customContextMenu:function(a){var b={enabled:!0},c=this.getFieldValue("NAME");b.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",c);var d=goog.dom.createDom("mutation");d.setAttribute("name",c);for(var e=0;e<this.arguments_.length;e++)c=
goog.dom.createDom("arg"),c.setAttribute("name",this.arguments_[e]),d.appendChild(c);d=goog.dom.createDom("block",null,d);d.setAttribute("type",this.callType_);b.callback=Blockly.ContextMenu.callbackFactory(this,d);a.push(b);if(!this.isCollapsed())for(e=0;e<this.arguments_.length;e++)b={enabled:!0},c=this.arguments_[e],b.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",c),d=goog.dom.createDom("field",null,c),d.setAttribute("name","VAR"),d=goog.dom.createDom("block",null,d),d.setAttribute("type",
"variables_get"),b.callback=Blockly.ContextMenu.callbackFactory(this,d),a.push(b)},callType_:"procedures_callnoreturn"};
Blockly.Blocks.procedures_defreturn={init:function(){var a=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE,Blockly.Procedures.rename);a.setSpellcheck(!1);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(a,"NAME").appendField("","PARAMS");this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"]));(this.workspace.options.comments||
this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL);this.arguments_=[];this.setStatements_(!0);this.statementConnection_=null},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,
updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,renameVar:Blockly.Blocks.procedures_defnoreturn.renameVar,
customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"};
Blockly.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);this.appendStatementInput("STACK");this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS");this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.procedures_mutatorarg={init:function(){var a=new Blockly.FieldTextInput("x",this.validator_);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(a,"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);this.contextMenu=!1;a.onFinishEditing_=this.createNewVar_;a.onFinishEditing_("x")},validator_:function(a){return(a=a.replace(/[\s\xa0]+/g,
" ").replace(/^ | $/g,""))||null},createNewVar_:function(a){var b=this.sourceBlock_;b&&b.workspace&&b.workspace.options&&b.workspace.options.parentWorkspace&&b.workspace.options.parentWorkspace.createVariable(a)}};
Blockly.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField(this.id,"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(a,b){Blockly.Names.equals(a,this.getProcedureCall())&&(this.setFieldValue(b,
"NAME"),this.setTooltip((this.outputConnection?Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP:Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",b)))},setProcedureParameters_:function(a,b){var c=Blockly.Procedures.getDefinition(this.getProcedureCall(),this.workspace),d=c&&c.mutator&&c.mutator.isVisible();d||(this.quarkConnections_={},this.quarkIds_=null);if(b)if(goog.array.equals(this.arguments_,a))this.quarkIds_=b;else{if(b.length!=a.length)throw"Error: paramNames and paramIds must be the same length.";
this.setCollapsed(!1);this.quarkIds_||(this.quarkConnections_={},a.join("\n")==this.arguments_.join("\n")?this.quarkIds_=b:this.quarkIds_=[]);c=this.rendered;this.rendered=!1;for(var e=0;e<this.arguments_.length;e++){var f=this.getInput("ARG"+e);f&&(f=f.connection.targetConnection,this.quarkConnections_[this.quarkIds_[e]]=f,d&&f&&-1==b.indexOf(this.quarkIds_[e])&&(f.disconnect(),f.getSourceBlock().bumpNeighbours_()))}this.arguments_=[].concat(a);this.updateShape_();if(this.quarkIds_=b)for(e=0;e<this.arguments_.length;e++)d=
this.quarkIds_[e],d in this.quarkConnections_&&(f=this.quarkConnections_[d],Blockly.Mutator.reconnect(f,this,"ARG"+e)||delete this.quarkConnections_[d]);(this.rendered=c)&&this.render()}},updateShape_:function(){for(var a=0;a<this.arguments_.length;a++){var b=this.getField("ARGNAME"+a);if(b){Blockly.Events.disable();try{b.setValue(this.arguments_[a])}finally{Blockly.Events.enable()}}else b=new Blockly.FieldLabel(this.arguments_[a]),this.appendValueInput("ARG"+a).setAlign(Blockly.ALIGN_RIGHT).appendField(b,
"ARGNAME"+a).init()}for(;this.getInput("ARG"+a);)this.removeInput("ARG"+a),a++;if(a=this.getInput("TOPROW"))this.arguments_.length?this.getField("WITH")||(a.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),a.init()):this.getField("WITH")&&a.removeField("WITH")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("name",this.getProcedureCall());for(var b=0;b<this.arguments_.length;b++){var c=document.createElement("arg");c.setAttribute("name",this.arguments_[b]);
a.appendChild(c)}return a},domToMutation:function(a){var b=a.getAttribute("name");this.renameProcedure(this.getProcedureCall(),b);for(var b=[],c=[],d=0,e;e=a.childNodes[d];d++)"arg"==e.nodeName.toLowerCase()&&(b.push(e.getAttribute("name")),c.push(e.getAttribute("paramId")));this.setProcedureParameters_(b,c)},renameVar:function(a,b){for(var c=0;c<this.arguments_.length;c++)Blockly.Names.equals(a,this.arguments_[c])&&(this.arguments_[c]=b,this.getField("ARGNAME"+c).setValue(b))},onchange:function(a){if(this.workspace&&
!this.workspace.isFlyout)if(a.type==Blockly.Events.CREATE&&-1!=a.ids.indexOf(this.id)){var b=this.getProcedureCall(),b=Blockly.Procedures.getDefinition(b,this.workspace);!b||b.type==this.defType_&&JSON.stringify(b.arguments_)==JSON.stringify(this.arguments_)||(b=null);if(!b){Blockly.Events.setGroup(a.group);a=goog.dom.createDom("xml");b=goog.dom.createDom("block");b.setAttribute("type",this.defType_);var c=this.getRelativeToSurfaceXY(),d=c.y+2*Blockly.SNAP_RADIUS;b.setAttribute("x",c.x+Blockly.SNAP_RADIUS*
(this.RTL?-1:1));b.setAttribute("y",d);c=this.mutationToDom();b.appendChild(c);c=goog.dom.createDom("field");c.setAttribute("name","NAME");c.appendChild(document.createTextNode(this.getProcedureCall()));b.appendChild(c);a.appendChild(b);Blockly.Xml.domToWorkspace(a,this.workspace);Blockly.Events.setGroup(!1)}}else a.type==Blockly.Events.DELETE&&(b=this.getProcedureCall(),b=Blockly.Procedures.getDefinition(b,this.workspace),b||(Blockly.Events.setGroup(a.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1)))},
customContextMenu:function(a){var b={enabled:!0};b.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;var c=this.getProcedureCall(),d=this.workspace;b.callback=function(){var a=Blockly.Procedures.getDefinition(c,d);a&&a.select()};a.push(b)},defType_:"procedures_defnoreturn"};
Blockly.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME");this.setOutput(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null},getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_,
updateShape_:Blockly.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,renameVar:Blockly.Blocks.procedures_callnoreturn.renameVar,onchange:Blockly.Blocks.procedures_callnoreturn.onchange,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"};
Blockly.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL);this.hasReturnValue_=!0},
mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("value",Number(this.hasReturnValue_));return a},domToMutation:function(a){this.hasReturnValue_=1==a.getAttribute("value");this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(a){if(!this.workspace.isDragging()){a=!1;var b=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(b.type)){a=!0;break}b=b.getSurroundParent()}while(b);a?
("procedures_defnoreturn"==b.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=b.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING),
this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};Blockly.Blocks.texts={};Blockly.Blocks.texts.HUE=160;
Blockly.Blocks.text={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"String");var a=this;this.setTooltip(function(){var b=a.getParent();return b&&b.getInputsInline()&&b.tooltip||Blockly.Msg.TEXT_TEXT_TOOLTIP})},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",12,12,'"')}};
Blockly.Blocks.text_join={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_JOIN_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.itemCount_=2;this.updateShape_();this.setOutput(!0,"String");this.setMutator(new Blockly.Mutator(["text_create_join_item"]));this.setTooltip(Blockly.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);
this.updateShape_()},decompose:function(a){var b=a.newBlock("text_create_join_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("text_create_join_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("ADD"+b).connection.targetConnection;
c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"ADD"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||
this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var a=0;a<this.itemCount_;a++)if(!this.getInput("ADD"+a)){var b=this.appendValueInput("ADD"+a);0==a&&b.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++},newQuote_:Blockly.Blocks.text.newQuote_};
Blockly.Blocks.text_create_join_container={init:function(){this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.text_create_join_item={init:function(){this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.text_append={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_APPEND_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").appendField(Blockly.Msg.TEXT_APPEND_TO).appendField(new Blockly.FieldVariable(Blockly.Msg.TEXT_APPEND_VARIABLE),"VAR").appendField(Blockly.Msg.TEXT_APPEND_APPENDTEXT);this.setPreviousStatement(!0);this.setNextStatement(!0);var a=this;this.setTooltip(function(){return Blockly.Msg.TEXT_APPEND_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})}};
Blockly.Blocks.text_length={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",colour:Blockly.Blocks.texts.HUE,tooltip:Blockly.Msg.TEXT_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.TEXT_LENGTH_HELPURL})}};
Blockly.Blocks.text_isEmpty={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",colour:Blockly.Blocks.texts.HUE,tooltip:Blockly.Msg.TEXT_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.TEXT_ISEMPTY_HELPURL})}};
Blockly.Blocks.text_indexOf={init:function(){var a=[[Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.setOutput(!0,"Number");this.appendValueInput("VALUE").setCheck("String").appendField(Blockly.Msg.TEXT_INDEXOF_INPUT_INTEXT);this.appendValueInput("FIND").setCheck("String").appendField(new Blockly.FieldDropdown(a),"END");Blockly.Msg.TEXT_INDEXOF_TAIL&&this.appendDummyInput().appendField(Blockly.Msg.TEXT_INDEXOF_TAIL);
this.setInputsInline(!0);var b=this;this.setTooltip(function(){return Blockly.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",b.workspace.options.oneBasedIndex?"0":"-1")})}};
Blockly.Blocks.text_charAt={init:function(){this.WHERE_OPTIONS=[[Blockly.Msg.TEXT_CHARAT_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_CHARAT_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_CHARAT_FIRST,"FIRST"],[Blockly.Msg.TEXT_CHARAT_LAST,"LAST"],[Blockly.Msg.TEXT_CHARAT_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.setOutput(!0,"String");this.appendValueInput("VALUE").setCheck("String").appendField(Blockly.Msg.TEXT_CHARAT_INPUT_INTEXT);this.appendDummyInput("AT");
this.setInputsInline(!0);this.updateAt_(!0);var a=this;this.setTooltip(function(){var b=a.getFieldValue("WHERE"),c=Blockly.Msg.TEXT_CHARAT_TOOLTIP;if("FROM_START"==b||"FROM_END"==b)c+="  "+("FROM_START"==b?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0");return c})},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},
domToMutation:function(a){a="false"!=a.getAttribute("at");this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT");this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));var b=new Blockly.FieldDropdown(this.WHERE_OPTIONS,
function(b){var c="FROM_START"==b||"FROM_END"==b;if(c!=a){var e=this.sourceBlock_;e.updateAt_(c);e.setFieldValue(b,"WHERE");return null}});this.getInput("AT").appendField(b,"WHERE")}};
Blockly.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);
this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(!0);this.setOutput(!0,"String");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),
b=this.getInput("AT1").type==Blockly.INPUT_VALUE;a.setAttribute("at1",b);b=this.getInput("AT2").type==Blockly.INPUT_VALUE;a.setAttribute("at2",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2");this.updateAt_(1,b);this.updateAt_(2,a)},updateAt_:function(a,b){this.removeInput("AT"+a);this.removeInput("ORDINAL"+a,!0);b?(this.appendValueInput("AT"+a).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):
this.appendDummyInput("AT"+a);2==a&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var c=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+a],function(c){var d="FROM_START"==c||"FROM_END"==c;if(d!=b){var f=this.sourceBlock_;f.updateAt_(a,d);f.setFieldValue(c,"WHERE"+a);return null}});this.getInput("AT"+a).appendField(c,"WHERE"+a);1==a&&this.moveInputBefore("AT1","AT2")}};
Blockly.Blocks.text_changeCase={init:function(){var a=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(a),"CASE");this.setOutput(!0,"String");this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}};
Blockly.Blocks.text_trim={init:function(){var a=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(a),"MODE");this.setOutput(!0,"String");this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}};
Blockly.Blocks.text_print={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.texts.HUE,tooltip:Blockly.Msg.TEXT_PRINT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_PRINT_HELPURL})}};
Blockly.Blocks.text_prompt_ext={init:function(){var a=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);var b=this,a=new Blockly.FieldDropdown(a,function(a){b.updateType_(a)});this.appendValueInput("TEXT").appendField(a,"TYPE");this.setOutput(!0,"String");this.setTooltip(function(){return"TEXT"==b.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},
updateType_:function(a){this.outputConnection.setCheck("NUMBER"==a?"Number":"String")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("type",this.getFieldValue("TYPE"));return a},domToMutation:function(a){this.updateType_(a.getAttribute("type"))}};
Blockly.Blocks.text_prompt={init:function(){var a=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],b=this;this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);a=new Blockly.FieldDropdown(a,function(a){b.updateType_(a)});this.appendDummyInput().appendField(a,"TYPE").appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"String");this.setTooltip(function(){return"TEXT"==
b.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},newQuote_:Blockly.Blocks.text.newQuote_,updateType_:Blockly.Blocks.text_prompt_ext.updateType_,mutationToDom:Blockly.Blocks.text_prompt_ext.mutationToDom,domToMutation:Blockly.Blocks.text_prompt_ext.domToMutation};Blockly.Blocks.variables={};Blockly.Blocks.variables.HUE=330;
Blockly.Blocks.variables_get={init:function(){this.setHelpUrl(Blockly.Msg.VARIABLES_GET_HELPURL);this.setColour(Blockly.Blocks.variables.HUE);this.appendDummyInput().appendField(new Blockly.FieldVariable(Blockly.Msg.VARIABLES_DEFAULT_NAME),"VAR");this.setOutput(!0);this.setTooltip(Blockly.Msg.VARIABLES_GET_TOOLTIP);this.contextMenuMsg_=Blockly.Msg.VARIABLES_GET_CREATE_SET},contextMenuType_:"variables_set",customContextMenu:function(a){var b={enabled:!0},c=this.getFieldValue("VAR");b.text=this.contextMenuMsg_.replace("%1",
c);c=goog.dom.createDom("field",null,c);c.setAttribute("name","VAR");c=goog.dom.createDom("block",null,c);c.setAttribute("type",this.contextMenuType_);b.callback=Blockly.ContextMenu.callbackFactory(this,c);a.push(b)}};
Blockly.Blocks.variables_set={init:function(){this.jsonInit({message0:Blockly.Msg.VARIABLES_SET,args0:[{type:"field_variable",name:"VAR",variable:Blockly.Msg.VARIABLES_DEFAULT_NAME},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.variables.HUE,tooltip:Blockly.Msg.VARIABLES_SET_TOOLTIP,helpUrl:Blockly.Msg.VARIABLES_SET_HELPURL});this.contextMenuMsg_=Blockly.Msg.VARIABLES_SET_CREATE_GET},contextMenuType_:"variables_get",customContextMenu:Blockly.Blocks.variables_get.customContextMenu};
// Copyright 2012 Google Inc.  Apache License 2.0
var APP_HUE=190;
Blockly.Blocks.rpc_definition={init:function(){this.appendDummyInput().appendField("\u901a\u8baf\u8868\u540d\u79f0").appendField(new Blockly.FieldTextInput("tb_one_plat"),"statDateName").appendField("\u662f\u5426\u5b9e\u65f6\u6570\u636e").appendField(new Blockly.FieldCheckbox("FALSE",this.updateIsRt_.bind(this)),"isRt");this.appendDummyInput("statDate").appendField("\u66f4\u65b0\u65f6\u95f4","updateTimeText").appendField(new Blockly.FieldCheckbox("FALSE",this.updateNeedUpdateTime_.bind(this)),"needUpdateTime");
this.appendDummyInput("interval").appendField("\u8f6e\u8be2\u95f4\u9694\u65f6\u95f4","intervalText").appendField(new Blockly.FieldCheckbox("FALSE",this.updateNeedInterval_.bind(this)),"needInterval");this.appendStatementInput("business_flows").setCheck(null);this.appendDummyInput().appendField("\u670d\u52a1\u7c7b\u578b").appendField(new Blockly.FieldDropdown([["HTTP\u670d\u52a1","http"],["HSF\u670d\u52a1","hsf"]]),"rpcType");this.setColour(APP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/rpc-definition")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isRt");a.setAttribute("is_rt",b);b="TRUE"==this.getFieldValue("needUpdateTime");a.setAttribute("need_update_time",b);b="TRUE"==this.getFieldValue("needInterval");a.setAttribute("need_interval",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("is_rt"),c="true"==a.getAttribute("need_update_time");a="true"==a.getAttribute("need_interval");this.updateIsRt_(b);this.updateNeedUpdateTime_(c,
b);this.updateNeedInterval_(a,b)},updateNeedUpdateTime_:function(a,b){var c=this.getInput("statDate");"undefined"===b&&(b="TRUE"==this.getFieldValue("isRt"));b||(a?this.getField("appId")||c.appendField(new Blockly.FieldVariable("statDate"),"statDate"):this.getField("statDate")&&c.removeField("statDate"))},updateNeedInterval_:function(a,b){var c=this.getInput("interval");"undefined"===b&&(b="TRUE"==this.getFieldValue("isRt"));b||(a?this.getField("intervalKey")||c.appendField(new Blockly.FieldTextInput("interval key"),
"intervalKey"):this.getField("intervalKey")&&c.removeField("intervalKey"))},updateIsRt_:function(a){var b=this.getInput("statDate"),c=this.getInput("interval");a?(this.getField("needUpdateTime")&&b.removeField("needUpdateTime"),this.getField("needInterval")&&c.removeField("needInterval"),this.getField("appId")&&b.removeField("appId"),this.getField("intervalKey")&&c.removeField("intervalKey"),b.appendField(new Blockly.FieldCheckbox("TRUE"),"needUpdateTime"),b.appendField(new Blockly.FieldTextInput("app id"),
"appId"),c.appendField(new Blockly.FieldCheckbox("TRUE"),"needInterval"),c.appendField(new Blockly.FieldTextInput("interval key"),"intervalKey")):this.getField("needInterval")&&(this.getField("needUpdateTime")&&b.removeField("needUpdateTime"),this.getField("statDate")&&b.removeField("statDate"),this.getField("appId")&&b.removeField("appId"),this.getField("needInterval")&&c.removeField("needInterval"),this.getField("intervalKey")&&c.removeField("intervalKey"),b.appendField(new Blockly.FieldCheckbox("FALSE",
this.updateNeedUpdateTime_.bind(this)),"needUpdateTime"),c.appendField(new Blockly.FieldCheckbox("FALSE",this.updateNeedInterval_.bind(this)),"needInterval"))}};Blockly.Blocks.rpc_business={init:function(){this.appendDummyInput().appendField("\u4e1a\u52a1\u903b\u8f91\u7247\u6bb5");this.appendStatementInput("business_flows").setCheck(null);this.setColour(APP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/rpc-business")}};
Blockly.Blocks.rpc_get_params={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6RPC\u7684\u53c2\u6570\u5217\u8868\uff0c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("params"),"params");this.appendDummyInput().appendField("RPC\u63a5\u53e3\u540d\u79f0").appendField(new Blockly.FieldVariable("rpcName"),"rpcName");this.setPreviousStatement(!0,"ParamInput");this.setNextStatement(!0,"GetParams");this.setColour(APP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/rpc-get-params")}};
Blockly.Blocks.rpc_function={init:function(){var a=new Blockly.FieldTextInput("method name",Blockly.Procedures.rename);a.setSpellcheck(!1);this.appendDummyInput().appendField("\u81ea\u5b9a\u4e49\u51fd\u6570\u540d\u79f0").appendField(a,"NAME").appendField("","PARAMS");this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"]));Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);this.setColour(APP_HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/rpc-function");this.arguments_=[];this.setStatements_(!0);this.statementConnection_=null},setStatements_:function(a){this.hasStatements_!==a&&(a?(this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=a)},updateParams_:function(){for(var a=!1,b={},c=0;c<this.arguments_.length;c++){if(b["arg_"+
this.arguments_[c].toLowerCase()]){a=!0;break}b["arg_"+this.arguments_[c].toLowerCase()]=!0}a?this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING):this.setWarningText(null);a="";this.arguments_.length&&(a=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", "));Blockly.Events.disable();try{this.setFieldValue(a,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(a){var b=document.createElement("mutation");a&&b.setAttribute("name",this.getFieldValue("NAME"));
for(var c=0;c<this.arguments_.length;c++){var d=document.createElement("arg");d.setAttribute("name",this.arguments_[c]);a&&this.paramIds_&&d.setAttribute("paramId",this.paramIds_[c]);b.appendChild(d)}this.hasStatements_||b.setAttribute("statements","false");return b},domToMutation:function(a){this.arguments_=[];for(var b=0,c;c=a.childNodes[b];b++)"arg"==c.nodeName.toLowerCase()&&this.arguments_.push(c.getAttribute("name"));this.updateParams_();Blockly.Procedures.mutateCallers(this);this.setStatements_("false"!==
a.getAttribute("statements"))},decompose:function(a){var b=a.newBlock("procedures_mutatorcontainer");b.initSvg();this.getInput("RETURN")?b.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):b.getInput("STATEMENT_INPUT").setVisible(!1);for(var c=b.getInput("STACK").connection,d=0;d<this.arguments_.length;d++){var e=a.newBlock("procedures_mutatorarg");e.initSvg();e.setFieldValue(this.arguments_[d],"NAME");e.oldLocation=d;c.connect(e.previousConnection);c=e.nextConnection}Blockly.Procedures.mutateCallers(this);
return b},compose:function(a){this.arguments_=[];this.paramIds_=[];for(var b=a.getInputTargetBlock("STACK");b;)this.arguments_.push(b.getFieldValue("NAME")),this.paramIds_.push(b.id),b=b.nextConnection&&b.nextConnection.targetBlock();this.updateParams_();Blockly.Procedures.mutateCallers(this);a=a.getFieldValue("STATEMENTS");if(null!==a&&(a="TRUE"==a,this.hasStatements_!=a))if(a)this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null;
else{a=this.getInput("STACK").connection;if(this.statementConnection_=a.targetConnection)a=a.targetBlock(),a.unplug(),a.bumpNeighbours_();this.setStatements_(!1)}},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},renameVar:function(a,b){for(var c=!1,d=0;d<this.arguments_.length;d++)Blockly.Names.equals(a,this.arguments_[d])&&(this.arguments_[d]=b,c=!0);if(c&&(this.updateParams_(),this.mutator.isVisible()))for(var c=this.mutator.workspace_.getAllBlocks(),
d=0,e;e=c[d];d++)"procedures_mutatorarg"==e.type&&Blockly.Names.equals(a,e.getFieldValue("NAME"))&&e.setFieldValue(b,"NAME")},customContextMenu:function(a){var b={enabled:!0},c=this.getFieldValue("NAME");b.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",c);var d=goog.dom.createDom("mutation");d.setAttribute("name",c);for(var e=0;e<this.arguments_.length;e++)c=goog.dom.createDom("arg"),c.setAttribute("name",this.arguments_[e]),d.appendChild(c);d=goog.dom.createDom("block",null,d);d.setAttribute("type",
this.callType_);b.callback=Blockly.ContextMenu.callbackFactory(this,d);a.push(b);if(!this.isCollapsed())for(e=0;e<this.arguments_.length;e++)b={enabled:!0},c=this.arguments_[e],b.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",c),d=goog.dom.createDom("field",null,c),d.setAttribute("name","VAR"),d=goog.dom.createDom("block",null,d),d.setAttribute("type","variables_get"),b.callback=Blockly.ContextMenu.callbackFactory(this,d),a.push(b)},callType_:"procedures_callnoreturn"};var COLLECTIONS_HUE=90;
Blockly.Blocks.collections_sum_allindex_value={init:function(){this.appendDummyInput().appendField("\u5bf9\u4e00\u884c(\u5217)\u7ed3\u679c\u96c6\u6c42\u548c\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("sumValue"),"sumValue");this.appendDummyInput().appendField("\u7ed3\u679c\u5bf9\u8c61").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u5bf9\u4e00\u884c\u7ed3\u679c\u96c6\u6c42\u548c\uff0c\u8fd4\u56de\u6c42\u548c\u540e\u7684\u503c");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-sum-allindex-value")}};Blockly.Blocks.collections_size={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u5217\u8868\u7684Size").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.setOutput(!0,"Number");this.setColour(COLLECTIONS_HUE);this.setTooltip("\u83b7\u53d6\u5217\u8868\u7684\u5927\u5c0f\uff0c\u5982\u679c\u4e3anull\uff0c\u8fd4\u56de0");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-size")}};
Blockly.Blocks.collections_keys={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6Map\u5bf9\u8c61\u7684Key\u5217\u8868").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.setOutput(!0,"List");this.setColour(COLLECTIONS_HUE);this.setTooltip("\u83b7\u53d6Map\u5bf9\u8c61\u7684Key\u5217\u8868");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-keys")}};
Blockly.Blocks.collections_values={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6Map\u5bf9\u8c61\u7684Value\u5217\u8868").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.setOutput(!0,"List");this.setColour(COLLECTIONS_HUE);this.setTooltip("\u83b7\u53d6Map\u5bf9\u8c61\u7684Value\u5217\u8868");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-values")}};
Blockly.Blocks.collections_merge={init:function(){this.appendDummyInput().appendField("\u5c06\u591a\u4e2a\u96c6\u5408(Map\u6216\u8005List)\u5408\u5e76\u4e3a\u4e00\u4e2a\u96c6\u5408\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("mergedResult"),"mergedResult");this.appendValueInput("params").setCheck(["List","Reference"]).appendField("\u96c6\u5408\u53c2\u6570\uff08\u7c7b\u578b\u9700\u8981\u662f\u4e00\u4e2a\u7c7b\u578b\uff09");this.setPreviousStatement(!0,null);this.setNextStatement(!0,
null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u83b7\u53d6Map\u5bf9\u8c61\u7684Value\u5217\u8868");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-merge")}};
Blockly.Blocks.collections_list={init:function(){this.appendDummyInput().appendField("\u521b\u5efa\u5217\u8868\uff08\u8df3\u8fc7Null\u503c\uff09\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("listResult"),"listResult");this.appendValueInput("params").setCheck(["List","Reference"]).appendField("\u53c2\u6570\u5217\u8868");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u5c06\u591a\u4e2a\u53d8\u91cf\u503c\uff08\u4e0d\u5305\u62ecnull\u503c\uff09\u5408\u5e76\u4e3a\u4e00\u4e2a\u5217\u8868");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-list")}};
Blockly.Blocks.collections_get_one={init:function(){this.appendValueInput("index").appendField("\u83b7\u53d6\u5217\u8868\u67d0\u4e0b\u6807\u7684\u6570\u636e\uff08\u4e0b\u6807\u4ece1\u5f00\u59cb\uff09").appendField(new Blockly.FieldVariable("list"),"list").appendField("\uff0c\u4e0b\u6807\u4e3a\uff1a").setCheck(["Number","Reference"]);this.setOutput(!0,null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u83b7\u53d6\u5217\u8868\u67d0\u4e0b\u6807\u7684\u6570\u636e\uff08\u4e0b\u6807\u4ece1\u5f00\u59cb\uff09");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-get-one")}};
Blockly.Blocks.collections_order_paging={init:function(){this.appendDummyInput().appendField("\u5217\u8868\u5185\u5b58\u6392\u5e8f\u5206\u9875\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("result"),"result");this.appendDummyInput().appendField("\u5f85\u6392\u5e8f\u5217\u8868").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u662f\u5426\u8fd4\u56de\u603b\u8bb0\u5f55\u6570").appendField(new Blockly.FieldCheckbox("TRUE"),
"needRecordCount");this.appendDummyInput().appendField("\u5355\u9875\u6700\u5927\u6761\u6570").appendField(new Blockly.FieldTextInput("10"),"maxPageSize");this.appendDummyInput().appendField("\u662f\u5426\u6392\u5e8f").appendField(new Blockly.FieldCheckbox("TRUE",this.handlerOrderBy.bind(this)),"needOrderBy").appendField("\u662f\u5426\u5206\u9875").appendField(new Blockly.FieldCheckbox("TRUE",this.handlerPaging.bind(this)),"needPaging");this.setPreviousStatement(!0,null);this.setNextStatement(!0,
null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u5bf9\u67e5\u8be2\u5217\u8868\u8fdb\u884c\u5185\u5b58\u6392\u5e8f\u5206\u9875");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-order-paging")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("needOrderBy");a.setAttribute("need_order_by",b);b="TRUE"==this.getFieldValue("needPaging");a.setAttribute("need_paging",b);return a},domToMutation:function(a){var b="true"==
a.getAttribute("need_order_by");a="true"==a.getAttribute("need_paging");this.handlerOrderBy(b);this.handlerPaging(a)},addRemoveField:function(a,b,c){b=this.getInput(b);var d=this.getField(c);a?d||b.appendField(new Blockly.FieldVariable(c),c):d&&b.removeField(c)},handlerOrderBy:function(a){var b=this.getInput("orderBy"),c=this.getInput("direction");a?(b||this.appendValueInput("orderBy").setCheck(["String","Reference"]).appendField("\u6392\u5e8f\u5b57\u6bb5\u540d\u79f0\uff08\u5bf9\u5e94\u6307\u6807\u522b\u540d\uff09"),
c||this.appendValueInput("direction").setCheck(["String","Reference"]).appendField("\u6392\u5e8f\u65b9\u5411")):(b&&this.removeInput("orderBy",!0),c&&this.removeInput("direction",!0))},handlerPaging:function(a){var b=this.getInput("page"),c=this.getInput("pageSize");a?(b||this.appendValueInput("page").setCheck(["Number","Reference"]).appendField("\u9875\u7801"),c||this.appendValueInput("pageSize").setCheck(["Number","Reference"]).appendField("\u6bcf\u9875\u8bb0\u5f55\u6570")):(b&&this.removeInput("page",
!0),c&&this.removeInput("pageSize",!0))}};
Blockly.Blocks.collections_build_parent_child={init:function(){this.appendDummyInput().appendField("\u901a\u8fc7\u7236\u5b50ID\u5bf9\u67e5\u8be2\u7ed3\u679c").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u6784\u5efa\u7236\u5b50\u6811\u5e76\u8d4b\u4e88\u8be5\u7ed3\u679c");this.appendDummyInput().appendField("\u7236ID\u540d\u79f0").appendField(new Blockly.FieldTextInput("parentId"),"parentId");this.appendDummyInput().appendField("\u5b50ID\u540d\u79f0").appendField(new Blockly.FieldTextInput("id"),"id");
this.appendDummyInput().appendField("\u6839\u8282\u70b9ID\u53d6\u503c").appendField(new Blockly.FieldTextInput("0"),"root");this.appendDummyInput().appendField("\u5f62\u6210\u7236\u5b50\u6811\u540e\u5b50\u8282\u70b9\u7d22\u5f15\u952e").appendField(new Blockly.FieldTextInput("children"),"children");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u901a\u8fc7\u7236\u5b50ID\u6784\u5efa\u7236\u5b50\u6811");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-build-parent-child")}};
Blockly.Blocks.collections_flat_parent_child={init:function(){this.appendDummyInput().appendField("\u5c06\u7236\u5b50\u6811\u7ed3\u679c\u5bf9\u8c61").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u5e73\u94fa\u540e\u5e76\u8d4b\u4e88\u8be5\u53d8\u91cf");this.appendDummyInput().appendField("\u5f62\u6210\u7236\u5b50\u6811\u540e\u5b50\u8282\u70b9\u7d22\u5f15\u952e").appendField(new Blockly.FieldTextInput("children"),"children");this.setPreviousStatement(!0,null);this.setNextStatement(!0,
null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u901a\u8fc7\u7236\u5b50ID\u6784\u5efa\u7236\u5b50\u6811");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-flat-parent-child")}};
Blockly.Blocks.collections_replace_map_key={init:function(){this.appendDummyInput().appendField("\u9012\u5f52\u66ff\u6362\u7ed3\u679c\u4e2dMap\u7684Key");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.itemCount_=1;this.updateShape_();this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u4fee\u6539\u67e5\u8be2\u7ed3\u679c\u4e2dMap\u7684Key");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-replace-map-key")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");
e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("ADD"+b).connection.targetConnection;c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"ADD"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");
for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=0;a<this.itemCount_;a++)this.getInput("ADD"+a)||this.appendValueInput("ADD"+a).setAlign(Blockly.ALIGN_RIGHT).setCheck(["String","Reference"]).appendField(new Blockly.FieldTextInput("from key"),"KEY"+a).appendField("\u66ff\u6362\u6210");for(;this.getInput("ADD"+
a);)this.removeInput("ADD"+a),a++}};
Blockly.Blocks.collections_add={init:function(){this.appendValueInput("element").appendField("\u5728").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u5217\u8868(\u6570\u7ec4)\u7684").appendField(new Blockly.FieldDropdown([["\u5c3e\u90e8","tail"],["\u5934\u90e8","head"]]),"direction").appendField("\u6dfb\u52a0\u5143\u7d20");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(COLLECTIONS_HUE);this.setTooltip("\u6dfb\u52a0\u5143\u7d20\u5230\u96c6\u5408\u4e2d");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/collections-add")}};var DATASOURCE_HUE=225;
Blockly.Blocks.datasource_select={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("smartdq"),"dbSpringName").appendField("\u67e5\u8be2\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("sqlKeyValue").setCheck(["String","Reference"]).appendField("SQL Key").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757","self.self"],["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757","self.common"],
["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendValueInput("params").setCheck("Map").appendField("\u6761\u4ef6\u53c2\u6570");var a=new Blockly.FieldDropdown([["\u83b7\u53d6\u5355\u6761\u6570\u636e","get"],["\u83b7\u53d6\u591a\u6761\u6570\u636e","list"],["\u5206\u9875\u83b7\u53d6\u591a\u6761\u6570\u636e",
"pageQuery"]],function(a){this.sourceBlock_.updateShape_("pageQuery"==a)});this.appendDummyInput("method").appendField("\u8c03\u7528\u65b9\u6cd5").appendField(a,"method").appendField("\u5355\u6761\u6a21\u5f0f\u6570\u636e\u4e3a\u7a7a\u662f\u5426\u9ed8\u8ba4\u4e00\u6761").appendField(new Blockly.FieldCheckbox("FALSE"),"getFillIfNull");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SmartDQQuery");this.setColour(DATASOURCE_HUE);this.setTooltip("SmartDQ\u6570\u636e\u67e5\u8be2\uff0c\u67e5\u8be2\u7684\u7ed3\u679c\u8fd4\u56de\u7684\u662fMap<String,Object>\u7c7b\u578b\uff0cMap\u4e2dKey\u8868\u793a\u6307\u6807\u522b\u540d\uff0cValue\u8868\u793a\u6307\u6807\u7684\u503c  >1\u3001SQL Key\uff1a\u5bf9\u5e94\u67e5\u8be2\u7684SQL\uff0c\u4ee5\u53ca\u6240\u5728\u7684\u5e94\u7528\u548c\u6a21\u5757  >2\u3001\u6307\u6807\u96c6\u5408\uff1a\u5bf9\u5e94\u67e5\u8be2\u6240\u6d89\u53ca\u7684\u6307\u6807  >3\u3001\u6761\u4ef6\u53c2\u6570\uff1a\u6570\u636e\u67e5\u8be2\u9700\u8981\u7684\u53c2\u6570 >4\u3001\u8c03\u7528\u65b9\u6cd5\uff1a\u8c03\u7528\u54ea\u4e2a\u65b9\u6cd5\u67e5\u8be2\u6570\u636e");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-select")},mutationToDom:function(){var a=document.createElement("mutation"),b="pageQuery"==this.getFieldValue("method");a.setAttribute("pagequery_input",b);return a},domToMutation:function(a){a="true"==a.getAttribute("pagequery_input");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("recordCount");a?b||(this.appendDummyInput("recordCount").appendField("\u8bb0\u5f55\u6570").appendField(new Blockly.FieldVariable("recordCount"),
"recordCount"),this.appendDummyInput("maxPageSize").appendField("\u5355\u9875\u6700\u5927\u6761\u6570").appendField(new Blockly.FieldTextInput("20"),"maxPageSize")):b&&(this.removeInput("recordCount",!0),this.removeInput("maxPageSize",!0))}};
Blockly.Blocks.datasource_update={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("smartdq"),"dbSpringName").appendField("\u589e\u5220\u6539\uff0c\u5f71\u54cd\u8bb0\u5f55\u6570\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("affectRows"),"affectRows");this.appendValueInput("sqlKeyValue").setCheck(["String","Reference"]).appendField("SQL Key").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757","self.self"],["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757",
"self.common"],["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendValueInput("params").setCheck("Map").appendField("\u6761\u4ef6\u53c2\u6570");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SmartDQQuery");this.setColour(DATASOURCE_HUE);this.setTooltip("\u6570\u636e\u5e93\u589e\u5220\u6539\u64cd\u4f5c");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-update")}};
Blockly.Blocks.datasource_cput_indx={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("smartdq"),"dbSpringName").appendField("\u67e5\u8be2\u5e76\u8ba1\u7b97\u884d\u751f\u6307\u6807\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("sqlKeyValue").setCheck(["String","Reference"]).appendField("SQL Key").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757","self.self"],
["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757","self.common"],["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendValueInput("params").setCheck("Map").appendField("\u6761\u4ef6\u53c2\u6570");var a=new Blockly.FieldDropdown([["\u83b7\u53d6\u5355\u6761\u6570\u636e","get"],
["\u83b7\u53d6\u591a\u6761\u6570\u636e","list"],["\u5206\u9875\u83b7\u53d6\u591a\u6761\u6570\u636e","pageQuery"]],function(a){this.sourceBlock_.updateShape_("pageQuery"==a)});this.appendDummyInput("method").appendField("\u8c03\u7528\u65b9\u6cd5").appendField(a,"method").appendField("\u5355\u6761\u6a21\u5f0f\u6570\u636e\u4e3a\u7a7a\u662f\u5426\u9ed8\u8ba4\u4e00\u6761").appendField(new Blockly.FieldCheckbox("FALSE"),"getFillIfNull");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,
"SmartDQQuery");this.setColour(DATASOURCE_HUE);this.setTooltip("SmartDQ\u67e5\u8be2\u6570\u636e\u5e76\u8ba1\u7b97\u884d\u751f\u6307\u6807");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-cput-indx")},mutationToDom:function(){var a=document.createElement("mutation"),b="pageQuery"==this.getFieldValue("method");a.setAttribute("pagequery_input",b);return a},domToMutation:function(a){a="true"==a.getAttribute("pagequery_input");this.updateShape_(a)},updateShape_:function(a){var b=
this.getInput("recordCount");a?b||(this.appendDummyInput("recordCount").appendField("\u8bb0\u5f55\u6570").appendField(new Blockly.FieldVariable("recordCount"),"recordCount"),this.appendDummyInput("maxPageSize").appendField("\u5355\u9875\u6700\u5927\u6761\u6570").appendField(new Blockly.FieldTextInput("20"),"maxPageSize")):b&&(this.removeInput("recordCount",!0),this.removeInput("maxPageSize",!0))}};
Blockly.Blocks.datesource_merge_by_key={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("smartdq"),"dbSpringName").appendField("\u6839\u636eID\u96c6\u5408\u67e5\u8be2\u7ed3\u679c\u540e\u5408\u5e76\u5230").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u4e2d");this.appendValueInput("sqlKeyValue").setCheck(["String","Reference"]).appendField("SQL Key").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757","self.self"],
["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757","self.common"],["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendValueInput("interfaceKeyValue").setCheck(["String","Reference"]).appendField("\u6307\u6807\u63a5\u53e3\u540d\u79f0");this.appendValueInput("params").setCheck("Map").appendField("\u6761\u4ef6\u53c2\u6570");this.appendDummyInput().appendField("\u6307\u6807ID(\u96c6\u5408)\u540d\u79f0").appendField(new Blockly.FieldTextInput("indexListName"),
"indexListName");this.appendDummyInput().appendField("\u8c03\u7528\u65b9\u6cd5").appendField(new Blockly.FieldDropdown([["\u83b7\u53d6\u591a\u6761\u6570\u636e","list"],["\u83b7\u53d6\u5355\u6761\u6570\u636e","get"]]),"method");this.appendDummyInput().appendField("\u5408\u5e76\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("indexAlias"),"indexAlias");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(DATASOURCE_HUE);this.setTooltip("");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-merge-by-key")}};
Blockly.Blocks.datasource_fill={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("smartdq"),"dbSpringName").appendField("\u67e5\u8be2\u540e\u8fdb\u884c\u6570\u636e\u8865\u5168\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("sqlKeyValue").setCheck(["String","Reference"]).appendField("SQL Key").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757","self.self"],
["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757","self.common"],["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendValueInput("params").setCheck("Map").appendField("\u6761\u4ef6\u53c2\u6570");this.appendDummyInput().appendField("\u8865\u5168\u53c2\u6570\u662f\u5426\u65f6\u95f4\u5468\u671f\u7c7b\u578b").appendField(new Blockly.FieldCheckbox("TRUE",
this.updateShape_.bind(this)),"isDatePeriod");this.appendDummyInput("fillParam").appendField("\u8865\u5168\u53c2\u6570").appendField(new Blockly.FieldVariable("datePeriod"),"fillParam");this.appendDummyInput("method").appendField("\u6570\u636e\u8865\u5168\u64cd\u4f5c").appendField(new Blockly.FieldDropdown([["\u53ea\u8fdb\u884c\u6570\u636e\u8865\u5168","listAndFill"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807","listAndFillCputIndx"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807\u540e\u5e76\u8f6c\u6210\u8d8b\u52bf\u7ed3\u679c",
"listAndFillCputCvtIndx"]]),"method");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SmartDQQuery");this.setColour(DATASOURCE_HUE);this.setTooltip("SmartDQ\u67e5\u8be2\u591a\u6761\u6570\u636e\u5e76\u8fdb\u884c\u7ed3\u679c\u8865\u5168");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-fill")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isDatePeriod");a.setAttribute("is_date_period",
b);b="TRUE"==this.getFieldValue("trendSize");a.setAttribute("trend_size",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("is_date_period");a="true"==a.getAttribute("trend_size");this.updateShape_(b,a)},updateShape_:function(a,b){var c=this.getInput("fillParam"),d=this.getField("trendSize");this.getField("textTrendSize")&&c.removeField("textTrendSize");d&&c.removeField("trendSize");this.getField("fillParam")&&c.removeField("fillParam");this.getField("idAliasText")&&c.removeField("idAliasText");
this.getField("idAlias")&&c.removeField("idAlias");a?(c.appendField(new Blockly.FieldVariable("datePeriod"),"fillParam"),c.appendField("\u81ea\u5b9a\u4e49\u914d\u7f6e\u8d8b\u52bf\u5929\u6570","textTrendSize"),c.appendField(new Blockly.FieldCheckbox(b?"TRUE":"FALSE",this.handlerTrendSize.bind(this)),"trendSize"),b&&!this.getInput("trendSize")?this.appendDummyInput("trendSize").appendField("\u65e5").appendField(new Blockly.FieldTextInput("30"),"day").appendField("\uff0c\u5468").appendField(new Blockly.FieldTextInput("24"),
"week").appendField("\uff0c\u6708").appendField(new Blockly.FieldTextInput("13"),"month").appendField("\uff0c\u5b63\u5ea6").appendField(new Blockly.FieldTextInput("8"),"quarter").appendField("\uff0c\u5e74").appendField(new Blockly.FieldTextInput("3"),"year"):!b&&this.getInput("trendSize")&&this.removeInput("trendSize",!0)):(this.removeInput("trendSize",!0),c.appendField(new Blockly.FieldVariable("idList"),"fillParam"),c.appendField("\u6570\u636e\u8865\u5168\u7684ID\u522b\u540d","idAliasText"),c.appendField(new Blockly.FieldTextInput("idAlias"),
"idAlias"));this.removeInput("method");this.appendDummyInput("method").appendField("\u6570\u636e\u8865\u5168\u64cd\u4f5c").appendField(new Blockly.FieldDropdown([["\u53ea\u8fdb\u884c\u6570\u636e\u8865\u5168","listAndFill"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807","listAndFillCputIndx"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807\u540e\u5e76\u8f6c\u6210\u8d8b\u52bf\u7ed3\u679c","listAndFillCputCvtIndx"]]),"method")},handlerTrendSize:function(a){this.updateShape_(!0,a)}};
Blockly.Blocks.datasource_cput_crc_indx={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("smartdq"),"dbSpringName").appendField("\u67e5\u8be2\u540e\u8ba1\u7b97\u884d\u751f\u6307\u6807\u4ee5\u53ca\u73af\u6bd4\uff08\u540c\u6bd4\uff09\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("sqlKeyValue").setCheck(["String","Reference"]).appendField("SQL Key").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757",
"self.self"],["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757","self.common"],["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendDummyInput().appendField("\u65f6\u95f4\u5468\u671f").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod");this.appendValueInput("params").setCheck("Map").appendField("\u6761\u4ef6\u53c2\u6570");
this.appendDummyInput().appendField("\u8ba1\u7b97\u8303\u56f4").appendField(new Blockly.FieldDropdown([["\u8ba1\u7b97\u8f83\u4e0a\u5468\u671f\u53d8\u5316\u7387","period"],["\u8ba1\u7b97\u73af\u6bd4","cycle"],["\u8ba1\u7b97\u540c\u6bd4","sync"],["\u8ba1\u7b97\u73af\u6bd4\u548c\u540c\u6bd4","cycle_sync"]]),"method").appendField("\u5355\u6761\u6a21\u5f0f\u6570\u636e\u4e3a\u7a7a\u662f\u5426\u9ed8\u8ba4\u4e00\u6761").appendField(new Blockly.FieldCheckbox("FALSE"),"getFillIfNull");var a=new Blockly.FieldCheckbox("TRUE",
function(a){this.sourceBlock_.updateShape_(a)});this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6\u662f\u5426\u662f\u591a\u6761\u6570\u636e").appendField(a,"isMultiLine");this.appendDummyInput("indexAlias").appendField("\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8bb0\u5f55\u7684\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("input index alias"),"indexAlias");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SmartDQQuery");this.setColour(DATASOURCE_HUE);
this.setTooltip("SmartDQ\u83b7\u53d6\u67e5\u8be2\u6570\u636e\uff0c\u5e76\u5bf9\u67e5\u8be2\u7ed3\u679c\u8ba1\u7b97\u884d\u751f\u6307\u6807\uff0c\u7136\u540e\u8ba1\u7b97\u73af\u6bd4\uff08\u540c\u6bd4\uff09");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-cput-crc-indx")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isMultiLine");a.setAttribute("is_single_line_input",!b);return a},domToMutation:function(a){a="true"!=
a.getAttribute("is_single_line_input");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("indexAlias");a?b||this.appendDummyInput("indexAlias").appendField("\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8bb0\u5f55\u7684\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("input index alias"),"indexAlias"):b&&this.removeInput("indexAlias",!0)}};
Blockly.Blocks.datasource_cput_ratio={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("smartdq"),"dbSpringName").appendField("\u67e5\u8be2\u540e\u8ba1\u7b97\u6307\u6807\u5360\u6bd4\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("sqlKeyValue").setCheck(["String","Reference"]).appendField("SQL Key").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757","self.self"],
["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757","self.common"],["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendDummyInput("totalNumber").appendField("\u5360\u6bd4\u7684\u5206\u6bcd").appendField(new Blockly.FieldVariable("totalNumber"),"totalNumber");this.appendValueInput("params").setCheck("Map").appendField("\u6761\u4ef6\u53c2\u6570");
this.appendDummyInput().appendField("\u8c03\u7528\u65b9\u6cd5").appendField(new Blockly.FieldDropdown([["\u83b7\u53d6\u5355\u6761\u6570\u636e","get"],["\u83b7\u53d6\u591a\u6761\u6570\u636e","list"]]),"method").appendField("\u5355\u6761\u6a21\u5f0f\u6570\u636e\u4e3a\u7a7a\u662f\u5426\u9ed8\u8ba4\u4e00\u6761").appendField(new Blockly.FieldCheckbox("FALSE"),"getFillIfNull");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SmartDQQuery");this.setColour(DATASOURCE_HUE);
this.setTooltip("\u67e5\u8be2SmartDQ\uff0c\u8ba1\u7b97\u884d\u751f\u6307\u6807\u540e\u8ba1\u7b97\u5360\u6bd4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-cput-ratio")}};
Blockly.Blocks.datasource_condition_map={init:function(){this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-condition-map");this.setColour(DATASOURCE_HUE);this.itemCount_=3;this.updateShape_();this.setOutput(!0,"Map");this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip("\u521b\u5efa\u6761\u4ef6\u53c2\u6570")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=
parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=
this.getInput("ADD"+b).connection.targetConnection;c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"ADD"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");
for(var a=0;a<this.itemCount_;a++)this.getInput("ADD"+a)||this.appendValueInput("ADD"+a).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldTextInput("key"),"KEY"+a);for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++}};
Blockly.Blocks.datasource_data_filter_var={init:function(){this.appendDummyInput().appendField("\u6309\u6761\u4ef6\u8fc7\u6ee4\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u8fc7\u6ee4\u6761\u4ef6\u4e3a");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-data-filter-var");this.setColour(DATASOURCE_HUE);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SmartDQQuery");this.itemCount_=
1;this.updateShape_();this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip("\u8fc7\u6ee4\u6570\u636e")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=
a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("RIGHT"+b).connection.targetConnection;c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"RIGHT"+
b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("RIGHT"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"],["in","IN"],["not in","NIN"],["contains","CTNS"]],b=0;b<this.itemCount_;b++)this.getInput("RIGHT"+
b)||this.appendValueInput("RIGHT"+b).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldVariable("fieldName"),"LEFT"+b).appendField(new Blockly.FieldDropdown(a),"OP"+b);for(;this.getInput("RIGHT"+b);)this.removeInput("RIGHT"+b),b++}};
Blockly.Blocks.datasource_data_filter_text={init:function(){this.appendDummyInput().appendField("\u6309\u6761\u4ef6\u8fc7\u6ee4\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u8fc7\u6ee4\u6761\u4ef6\u4e3a");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-data-filter-text");this.setColour(DATASOURCE_HUE);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SmartDQQuery");this.itemCount_=
1;this.updateShape_();this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip("\u8fc7\u6ee4\u6570\u636e")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=
a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("RIGHT"+b).connection.targetConnection;c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"RIGHT"+
b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("RIGHT"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"],["in","IN"],["not in","NIN"],["contains","CTNS"]],b=0;b<this.itemCount_;b++)this.getInput("RIGHT"+
b)||this.appendValueInput("RIGHT"+b).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldTextInput("fieldName"),"LEFT"+b).appendField(new Blockly.FieldDropdown(a),"OP");for(;this.getInput("RIGHT"+b);)this.removeInput("RIGHT"+b),b++}};
Blockly.Blocks.datasource_case_when={init:function(){var a=[["replaced with","REPLACED_WITH"],[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"],["add prefix","ADD_PREFIX"],["add suffix","ADD_SUFFIX"],["replaced with if null add","REPLACED_WITH_IF_NULL_ADD"]];this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-case-when");this.setColour(DATASOURCE_HUE);
this.appendDummyInput().appendField("\u5bf9").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u6267\u884cCase When");this.appendValueInput("whenField").appendField("case when fieldName").setCheck(["String","Reference"]).setAlign(Blockly.ALIGN_RIGHT);this.appendValueInput("whenValue").appendField(new Blockly.FieldDropdown([["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"],["in","IN"],["not in","NIN"],["contains","CTNS"]]),"whenOp").setAlign(Blockly.ALIGN_RIGHT);
this.appendValueInput("thenField").appendField("then fieldName").setCheck(["String","Reference"]).setAlign(Blockly.ALIGN_RIGHT);this.appendValueInput("thenValue").appendField(new Blockly.FieldDropdown(a),"thenOp").setAlign(Blockly.ALIGN_RIGHT);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"CaseWhen");this.setInputsInline(!1)}};
Blockly.Blocks.datasource_data_group_by={init:function(){this.appendDummyInput().appendField("\u5bf9").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u6267\u884cGroup By\u540e\u7ed3\u679c\u8d4b\u4e88\u8be5\u5bf9\u8c61");this.appendValueInput("groupBy").setCheck(["String","Reference"]).appendField("group by\u5b57\u6bb5");this.appendDummyInput().appendField("\u805a\u5408\u540e\u662f\u5426\u4e3a\u5355\u6761\u6570\u636e").appendField(new Blockly.FieldCheckbox("TRUE"),
"isSingle");this.appendDummyInput("defaultAggregatedInput").appendField("\u9ed8\u8ba4\u6267\u884c\u51fd\u6570").appendField(new Blockly.FieldDropdown([["sum","SUM"],["avg","AVG"],["\u65e0","NONE"]]),"defaultAggregated");this.itemCount_=2;this.updateShape_();this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"GroupBy");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-data-group-by");
this.setColour(DATASOURCE_HUE);this.setTooltip("\u5bf9\u7ed3\u679c\u96c6\u6267\u884cGroup By")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");
e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("FIELD"+b).connection.targetConnection;c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"FIELD"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");
for(var b=0;a;){var c=this.getInput("FIELD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=[["avg","AVG"],["sum","SUM"],["max","MAX"],["min","MIN"],["\u65e0","NONE"]],b=0;b<this.itemCount_;b++)if(this.getInput("FIELD"+b)){var c=this.getInput("FIELD"+b);"AVG"!==this.getFieldValue("AGGREGATED"+b)?(this.getField("SKIPTEXT"+b)&&c.removeField("SKIPTEXT"+
b),this.getField("SKIPNULL"+b)&&c.removeField("SKIPNULL"+b)):this.getField("SKIPTEXT"+b)||this.getField("SKIPNULL"+b)||c.appendField("\u5ffd\u7565NULL\u503c","SKIPTEXT"+b).appendField(new Blockly.FieldCheckbox("TRUE"),"SKIPNULL"+b)}else this.appendValueInput("FIELD"+b).setCheck(["String","Reference"]).setAlign(Blockly.ALIGN_RIGHT).appendField("\u5bf9\u5b57\u6bb5\u6267\u884c\u51fd\u6570").appendField(new Blockly.FieldDropdown(a),"AGGREGATED"+b).appendField("\u5ffd\u7565NULL\u503c","SKIPTEXT"+b).appendField(new Blockly.FieldCheckbox("TRUE"),
"SKIPNULL"+b);for(;this.getInput("FIELD"+b);)this.removeInput("FIELD"+b),b++},onchange:function(a){this.updateShape_();a=this.getInput("defaultAggregatedInput");"AVG"!==this.getFieldValue("defaultAggregated")?this.getField("defaultSkipText")&&(a.removeField("defaultSkipText"),a.removeField("defaultSkipNull")):this.getField("defaultSkipText")||a.appendField("\u5ffd\u7565NULL\u503c","defaultSkipText").appendField(new Blockly.FieldCheckbox("TRUE"),"defaultSkipNull")}};
Blockly.Blocks.datasource_value_replace={init:function(){this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/datasource-value-replace");this.setColour(DATASOURCE_HUE);this.appendDummyInput().appendField("\u5bf9\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u67d0\u5b57\u6bb5\u8fdb\u884c\u503c\u66ff\u6362");this.appendValueInput("fieldName").setCheck(["String","Reference"]).setAlign(Blockly.ALIGN_RIGHT).appendField("\u5b57\u6bb5\u540d\u79f0");
this.itemCount_=2;this.updateShape_();this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setPreviousStatement(!0,null);this.setNextStatement(!0,"ValueReplace");this.setInputsInline(!1)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();
for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("AFTER"+b).connection.targetConnection;c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();
for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"AFTER"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("AFTER"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=0;a<this.itemCount_;a++)this.getInput("AFTER"+a)||this.appendValueInput("AFTER"+a).setAlign(Blockly.ALIGN_RIGHT).appendField("\u503c\u4e3a").appendField(new Blockly.FieldTextInput("value"),
"BEFORE"+a).appendField("\u66ff\u6362\u4e3a");for(;this.getInput("AFTER"+a);)this.removeInput("AFTER"+a),a++}};var INDEXS_HUE=125;
Blockly.Blocks.index_fill={init:function(){this.appendDummyInput().appendField("\u6570\u636e\u8865\u5168");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u5217\u8868").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendDummyInput().appendField("\u8865\u5168\u53c2\u6570\u662f\u5426\u65f6\u95f4\u5468\u671f\u7c7b\u578b").appendField(new Blockly.FieldCheckbox("TRUE",this.updateShape_.bind(this)),
"isDatePeriod");this.appendDummyInput("fillParam").appendField("\u8865\u5168\u53c2\u6570").appendField(new Blockly.FieldVariable("datePeriod"),"fillParam");this.appendDummyInput("method").appendField("\u6570\u636e\u8865\u5168\u64cd\u4f5c").appendField(new Blockly.FieldDropdown([["\u53ea\u8fdb\u884c\u6570\u636e\u8865\u5168","listAndFill"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807","listAndFillCputIndx"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807\u540e\u5e76\u8f6c\u6210\u8d8b\u52bf\u7ed3\u679c",
"listAndFillCputCvtIndx"]]),"method");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"IndexFill");this.setColour(INDEXS_HUE);this.setTooltip("\u5bf9\u6307\u6807\u6570\u636e\u6309\u7167\u65f6\u95f4\u8865\u5168");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-fill")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isDatePeriod");a.setAttribute("is_date_period",b);b="TRUE"==this.getFieldValue("trendSize");a.setAttribute("trend_size",
b);return a},domToMutation:function(a){var b="true"==a.getAttribute("is_date_period");a="true"==a.getAttribute("trend_size");this.updateShape_(b,a)},updateShape_:function(a,b){var c=this.getInput("fillParam"),d=this.getField("trendSize");this.getField("textTrendSize")&&c.removeField("textTrendSize");d&&c.removeField("trendSize");this.getField("fillParam")&&c.removeField("fillParam");this.getField("idAliasText")&&c.removeField("idAliasText");this.getField("idAlias")&&c.removeField("idAlias");a?(c.appendField(new Blockly.FieldVariable("datePeriod"),
"fillParam"),c.appendField("\u81ea\u5b9a\u4e49\u914d\u7f6e\u8d8b\u52bf\u5929\u6570","textTrendSize"),c.appendField(new Blockly.FieldCheckbox(b?"TRUE":"FALSE",this.handlerTrendSize.bind(this)),"trendSize"),b&&!this.getInput("trendSize")?this.appendDummyInput("trendSize").appendField("\u65e5").appendField(new Blockly.FieldTextInput("30"),"day").appendField("\uff0c\u5468").appendField(new Blockly.FieldTextInput("24"),"week").appendField("\uff0c\u6708").appendField(new Blockly.FieldTextInput("13"),"month").appendField("\uff0c\u5b63\u5ea6").appendField(new Blockly.FieldTextInput("8"),
"quarter").appendField("\uff0c\u5e74").appendField(new Blockly.FieldTextInput("3"),"year"):!b&&this.getInput("trendSize")&&this.removeInput("trendSize",!0)):(this.removeInput("trendSize",!0),c.appendField(new Blockly.FieldVariable("idList"),"fillParam"),c.appendField("\u6570\u636e\u8865\u5168\u7684ID\u522b\u540d","idAliasText"),c.appendField(new Blockly.FieldTextInput("idAlias"),"idAlias"));this.removeInput("method");this.appendDummyInput("method").appendField("\u6570\u636e\u8865\u5168\u64cd\u4f5c").appendField(new Blockly.FieldDropdown([["\u53ea\u8fdb\u884c\u6570\u636e\u8865\u5168",
"listAndFill"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807","listAndFillCputIndx"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807\u540e\u5e76\u8f6c\u6210\u8d8b\u52bf\u7ed3\u679c","listAndFillCputCvtIndx"]]),"method")},handlerTrendSize:function(a){this.updateShape_(!0,a)}};
Blockly.Blocks.index_fill_accumulate={init:function(){this.appendDummyInput().appendField("\u7d2f\u8ba1\u6307\u6807\u6570\u636e\u8865\u5168\uff08\u517c\u5bb9\u975e\u7d2f\u8ba1\u6307\u6807\uff09");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u5217\u8868").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendDummyInput().appendField("\u8865\u5168\u53c2\u6570").appendField(new Blockly.FieldVariable("idList"),
"fillParam").appendField("\u6570\u636e\u8865\u5168\u7684ID\u522b\u540d").appendField(new Blockly.FieldTextInput("idAlias"),"idAlias");this.appendValueInput("notAccumulates").setCheck(["List"]).appendField("\u975e\u7d2f\u8ba1\u6307\u6807\u522b\u540d\u5217\u8868");this.appendDummyInput("method").appendField("\u6570\u636e\u8865\u5168\u64cd\u4f5c").appendField(new Blockly.FieldDropdown([["\u53ea\u8fdb\u884c\u6570\u636e\u8865\u5168","listAndFill"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807",
"listAndFillCputIndx"],["\u6570\u636e\u8865\u5168\u5e76\u8ba1\u7b97\u6307\u6807\u540e\u5e76\u8f6c\u6210\u8d8b\u52bf\u7ed3\u679c","listAndFillCputCvtIndx"]]),"method");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"IndexFill");this.setColour(INDEXS_HUE);this.setTooltip("\u5bf9\u6307\u6807\u6570\u636e\u6309\u7167\u65f6\u95f4\u8865\u5168");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-fill-accumulate")}};
Blockly.Blocks.index_cput={init:function(){this.appendDummyInput().appendField("\u884d\u751f\u6307\u6807\u8ba1\u7b97");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u5217\u8868").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"IndexCput");this.setColour(INDEXS_HUE);this.setTooltip("\u8ba1\u7b97\u884d\u751f\u6307\u6807");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-cput")}};
Blockly.Blocks.index_get={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u6307\u6807\u63a5\u53e3\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendDummyInput().appendField("\u662f\u5426\u8d8b\u52bf(\u5bf9\u6700\u8fd17\u5929\u548c30\u5929\u505a\u8fc7\u7279\u6b8a\u5904\u7406)").appendField(new Blockly.FieldCheckbox("FALSE"),"isTrend");this.appendDummyInput().appendField("\u5e94\u7528\u6a21\u5757").appendField(new Blockly.FieldDropdown([["\u672c\u5e94\u7528\u672c\u6a21\u5757",
"self.self"],["\u672c\u5e94\u7528\u901a\u7528\u6a21\u5757","self.common"],["\u7236\u5e94\u7528\u7ec4\u901a\u7528\u6a21\u5757","parent.common"],["\u901a\u7528\u5e94\u7528\u901a\u7528\u6a21\u5757","common.common"]]),"appModule");this.appendValueInput("interfaceName").setCheck(["String","Reference"]).appendField("\u63a5\u53e3\u540d\u79f0");this.appendDummyInput("hasIndexs").appendField("\u662f\u5426\u8fd4\u56de\u7ed9\u5b9a\u6307\u6807").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerHasIndexs.bind(this)),
"hasIndexs");this.appendDummyInput("hasTb").appendField("\u662f\u5426\u533a\u5206\u6dd8\u5b9d\u5929\u732b").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerHasTb.bind(this)),"hasTb");this.appendDummyInput("hasPeriod").appendField("\u662f\u5426\u533a\u5206\u65f6\u95f4\u5468\u671f").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerHasPeriod.bind(this)),"hasPeriod");this.appendDummyInput("hasDevice").appendField("\u662f\u5426\u533a\u5206\u7ec8\u7aef\u7c7b\u578b").appendField(new Blockly.FieldCheckbox("FALSE",
this.handlerHasDevice.bind(this)),"hasDevice");this.appendDummyInput("hasOrderBy").appendField("\u662f\u5426\u9a8c\u8bc1\u6392\u5e8f\u5b57\u6bb5\u5b58\u5728").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerHasOrderBy.bind(this)),"hasOrderBy");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"IndexGet");this.setColour(INDEXS_HUE);this.setTooltip("\u6839\u636e\u63a5\u53e3\u540d\u79f0\u83b7\u53d6\u6240\u6709\u63a5\u53e3\u4e0b\u6307\u6807");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-get")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasIndexs");a.setAttribute("has_indexs",b);b="TRUE"==this.getFieldValue("hasTb");a.setAttribute("has_tb",b);b="TRUE"==this.getFieldValue("hasPeriod");a.setAttribute("has_period",b);b="TRUE"==this.getFieldValue("hasDevice");a.setAttribute("has_device",b);b="TRUE"==this.getFieldValue("hasOrderBy");a.setAttribute("has_orderby",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("has_indexs"),
c="true"==a.getAttribute("has_tb"),d="true"==a.getAttribute("has_period"),e="true"==a.getAttribute("has_device");a="true"==a.getAttribute("has_orderby");this.updateShape_(b,c,d,e,a)},updateShape_:function(a,b,c,d,e){this.addRemoveField(a,"hasIndexs","indexCode");this.addRemoveField(b,"hasTb","isTb");this.addRemoveField(c,"hasPeriod","datePeriod");this.addRemoveField(d,"hasDevice","deviceType");this.addRemoveField(e,"hasOrderBy","orderBy")},addRemoveField:function(a,b,c){b=this.getInput(b);var d=this.getField(c);
a?d||b.appendField(new Blockly.FieldVariable("deviceType"==c?"device":c),c):d&&b.removeField(c)},handlerHasIndexs:function(a){this.addRemoveField(a,"hasIndexs","indexCode")},handlerHasTb:function(a){this.addRemoveField(a,"hasTb","isTb")},handlerHasPeriod:function(a){this.addRemoveField(a,"hasPeriod","datePeriod")},handlerHasDevice:function(a){this.addRemoveField(a,"hasDevice","deviceType")},handlerHasOrderBy:function(a){this.addRemoveField(a,"hasOrderBy","orderBy")}};
Blockly.Blocks.index_merge_rival={init:function(){this.appendDummyInput().appendField("\u5c06\u884c\u4e1a\u5e73\u5747\uff08\u4f18\u79c0\uff09\u6570\u636e\u5408\u5e76\u5230\u6211\u7684\u6570\u636e\u4e2d");this.appendDummyInput().appendField("\u6211\u7684\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("myQueryResult"),"myQueryResult");this.appendDummyInput().appendField("\u884c\u4e1a\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("rivalQueryResult"),"rivalQueryResult");
this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendDummyInput().appendField("\u5408\u5e76\u5185\u5bb9").appendField(new Blockly.FieldDropdown([["\u5408\u5e76\u884c\u4e1a\u5e73\u5747\u6570\u636e","rivalAvg"],["\u5408\u5e76\u884c\u4e1a\u4f18\u79c0\u6570\u636e","rivalGood"]]),"rivalType");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"MergeRival");this.setColour(INDEXS_HUE);this.setTooltip("\u5408\u5e76\u6211\u7684\u6570\u636e\u548c\u884c\u4e1a\u6570\u636e\uff0c\u8981\u6c42\u6211\u7684\u6570\u636e\u548c\u884c\u4e1a\u6570\u636e\u76f8\u540c\u6307\u6807\u5bf9\u5e94\u7684\u522b\u540d\u662f\u4e00\u6837\u7684\uff0c\u5177\u6709\u6620\u5c04\u5173\u7cfb\uff0c\u5e76\u4e14\u67e5\u8be2\u7ed3\u679c\u90fd\u662f\u5355\u6761\u6570\u636e");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-merge-rival")}};
Blockly.Blocks.index_merge_data_2_my={init:function(){this.appendDummyInput().appendField("\u5408\u5e76\u6570\u636e\u5230\u6211\u7684\u6570\u636e\u96c6\u6307\u6807\u4e0b");this.appendDummyInput().appendField("\u6211\u7684\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("myQueryResult"),"myQueryResult");this.appendDummyInput().appendField("\u5f85\u5408\u5e76\u6570\u636e\u96c6").appendField(new Blockly.FieldVariable("mergerQueryResult"),"mergerQueryResult");this.appendDummyInput().appendField("\u662f\u5426\u6574\u4f53\u4e0b\u6c89\u4e00\u5c42\u5408\u5e76(\u5426\u5219\u4e3a\u540c\u540d\u6307\u6807\u5408\u5e76)").appendField(new Blockly.FieldCheckbox("FALSE"),
"isSank");this.appendDummyInput().appendField("\u5408\u5e76\u540e\u7684\u5c5e\u6027Key(\u6700\u7ec8\u5c55\u793a\u7ed9\u524d\u7aef)").appendField(new Blockly.FieldTextInput("dataKey"),"dataKey");var a=new Blockly.FieldCheckbox("FALSE",function(a){this.sourceBlock_.updateShape_(a)});this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6\u662f\u5426\u662f\u591a\u6761\u6570\u636e").appendField(a,"isMultiLine");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"MergeRival");this.setColour(INDEXS_HUE);
this.setTooltip("\u5408\u5e76\u6211\u7684\u6570\u636e\u548c\u884c\u4e1a\u6570\u636e\uff0c\u5982\u679c\u5355\u4e2a\u6307\u6807\u5408\u5e76\u8981\u6c42\u6211\u7684\u6570\u636e\u548c\u884c\u4e1a\u6570\u636e\u76f8\u540c\u6307\u6807\u5bf9\u5e94\u7684\u522b\u540d\u662f\u4e00\u6837\u7684\uff0c\u5177\u6709\u6620\u5c04\u5173\u7cfb");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-merge-data-2-my")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isMultiLine");
a.setAttribute("is_multiline",b);return a},domToMutation:function(a){a="true"==a.getAttribute("is_multiline");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("indexAlias");a?b||this.appendDummyInput("indexAlias").appendField("\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8bb0\u5f55\u7684\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("input index alias"),"indexAlias"):b&&this.removeInput("indexAlias",!0)}};
Blockly.Blocks.index_merge_data={init:function(){this.appendDummyInput().appendField("\u5408\u5e76\u6570\u636e\u96c6\uff0c\u7ed3\u679c\u8d4b\u4e88\u6211\u7684\u67e5\u8be2\u7ed3\u679c\u96c6");this.appendDummyInput().appendField("\u5408\u5e76\u53cc\u65b9\u6570\u636e\u662f\u5426\u4e0b\u6c89\u4e00\u5c42").appendField(new Blockly.FieldCheckbox("TRUE",this.isSank_.bind(this)),"isSank");this.appendDummyInput("myQueryResult").appendField("\u6211\u7684\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("myQueryResult"),
"myQueryResult");this.appendDummyInput("mergerQueryResult").appendField("\u5f85\u5408\u5e76\u6570\u636e\u96c6").appendField(new Blockly.FieldVariable("mergerQueryResult"),"mergerQueryResult");var a=new Blockly.FieldCheckbox("FALSE",function(a){this.sourceBlock_.isMultiLine_(a)});this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6\u662f\u5426\u662f\u591a\u6761\u6570\u636e").appendField(a,"isMultiLine");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"MergeRival");this.setColour(INDEXS_HUE);
this.setTooltip("\u5408\u5e76\u6211\u7684\u6570\u636e\u548c\u884c\u4e1a\u6570\u636e\uff0c\u8981\u6c42\u6211\u7684\u6570\u636e\u548c\u884c\u4e1a\u6570\u636e\u76f8\u540c\u6307\u6807\u5bf9\u5e94\u7684\u522b\u540d\u662f\u4e00\u6837\u7684\uff0c\u5177\u6709\u6620\u5c04\u5173\u7cfb\uff0c\u5e76\u4e14\u67e5\u8be2\u7ed3\u679c\u90fd\u662f\u5355\u6761\u6570\u636e");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-merge-data")},mutationToDom:function(){var a=document.createElement("mutation"),
b="TRUE"==this.getFieldValue("isMultiLine");a.setAttribute("is_multiline",b);b="TRUE"==this.getFieldValue("isSank");a.setAttribute("is_sank",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("is_multiline");this.isMultiLine_(b);a="true"==a.getAttribute("is_sank");this.isSank_(a)},isSank_:function(a){var b=this.getFieldValue("myKey");a?b||(this.getInput("myQueryResult").appendField(new Blockly.FieldTextInput("input key stand for this result"),"myKey"),this.getInput("mergerQueryResult").appendField(new Blockly.FieldTextInput("input key stand for this result"),
"mergerKey")):b&&(this.getInput("myQueryResult").removeField("myKey"),this.getInput("mergerQueryResult").removeField("mergerKey"))},isMultiLine_:function(a){var b=this.getInput("indexAlias");a?b||this.appendDummyInput("indexAlias").appendField("\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8bb0\u5f55\u7684\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("input index alias"),"indexAlias"):b&&this.removeInput("indexAlias",!0)}};
Blockly.Blocks.index_cput_crc_and_cqc={init:function(){this.appendDummyInput().appendField("\u8ba1\u7b97\u6307\u6807\u73af\u6bd4\uff08\u540c\u6bd4\uff09\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("result"),"result");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),
"indexs");this.appendDummyInput().appendField("\u65f6\u95f4\u5468\u671f").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod");this.appendDummyInput().appendField("\u8ba1\u7b97\u8303\u56f4").appendField(new Blockly.FieldDropdown([["\u8ba1\u7b97\u8f83\u4e0a\u5468\u671f\u53d8\u5316\u7387","period"],["\u8ba1\u7b97\u73af\u6bd4","cycle"],["\u8ba1\u7b97\u540c\u6bd4","sync"],["\u8ba1\u7b97\u73af\u6bd4\u548c\u540c\u6bd4","cycle_sync"]]),"method");var a=new Blockly.FieldCheckbox("FALSE",function(a){this.sourceBlock_.updateShape_(a)});
this.appendDummyInput().appendField("\u8ba1\u7b97\u540e\u7ed3\u679c\u96c6\u662f\u5426\u662f\u591a\u6761\u6570\u636e").appendField(a,"isMultiLine");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SelfRatio");this.setColour(INDEXS_HUE);this.setTooltip("\u8ba1\u7b97\u6307\u6807\u540c\u6bd4\u6216\u8005\u73af\u6bd4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-cput-crc-and-cqc")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isMultiLine");
a.setAttribute("is_single_line_input",!b);return a},domToMutation:function(a){a="true"!=a.getAttribute("is_single_line_input");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("indexAlias");a?b||this.appendDummyInput("indexAlias").appendField("\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8bb0\u5f55\u7684\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("input index alias"),"indexAlias"):b&&this.removeInput("indexAlias",!0)}};
Blockly.Blocks.index_cput_rate_change={init:function(){this.appendDummyInput().appendField("\u8ba1\u7b97\u6307\u6807\u53d8\u5316\u7387\uff08\u540c\u73af\u6bd4\uff09\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("result"),"result");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),
"indexs");this.appendDummyInput().appendField("\u65f6\u95f4\u5217\u8868").appendField(new Blockly.FieldVariable("dateList"),"dateList");this.appendDummyInput().appendField("\u81ea\u5b9a\u4e49\u53d8\u5316\u7387\u540d\u79f0").appendField(new Blockly.FieldTextInput("rateChange"),"rateChangeName");var a=new Blockly.FieldCheckbox("FALSE",function(a){this.sourceBlock_.updateShape_(a)});this.appendDummyInput().appendField("\u8ba1\u7b97\u540e\u7ed3\u679c\u96c6\u662f\u5426\u662f\u591a\u6761\u6570\u636e").appendField(a,
"isMultiLine");this.appendValueInput("stepSize").appendField("\u53d8\u5316\u7387\u6b65\u957f").setCheck(["Number","DaySize"]);this.setPreviousStatement(!0,null);this.setNextStatement(!0,"SelfRatio");this.setColour(INDEXS_HUE);this.setTooltip("\u8ba1\u7b97\u6307\u6807\u53d8\u5316\u7387\uff08\u540c\u6bd4\u6216\u8005\u73af\u6bd4\uff09");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-cput-rate-change")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==
this.getFieldValue("isMultiLine");a.setAttribute("is_single_line_input",!b);return a},domToMutation:function(a){a="true"!=a.getAttribute("is_single_line_input");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("indexAlias");a?(this.removeInput("stepSize",!0),b||this.appendDummyInput("indexAlias").appendField("\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8bb0\u5f55\u7684\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("input index alias"),"indexAlias")):b&&(this.removeInput("indexAlias",
!0),this.appendValueInput("stepSize").appendField("\u53d8\u5316\u7387\u6b65\u957f").setCheck(["Number","DaySize"]))}};
Blockly.Blocks.index_cput_self_ratio={init:function(){this.appendDummyInput().appendField("\u8ba1\u7b97\u6307\u6807\u5360\u6bd4\uff08\u6bcf\u5217\u5360\u5217\u603b\u548c\u7684\u5360\u6bd4\uff09");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.setPreviousStatement(!0,null);this.setNextStatement(!0,
"SelfRatio");this.setColour(INDEXS_HUE);this.setTooltip("\u8ba1\u7b97\u6307\u6807\u5360\u6bd4(\u5360\u6bd4\u7684\u5206\u6bcd\u662f\u67e5\u8be2\u5217\u8868\u5bf9\u5e94\u5217\u7684\u603b\u548c\uff0c\u8ba1\u7b97\u6bcf\u4e00\u5217\u5360\u603b\u548c\u7684\u5360\u6bd4)");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-cput-self-ratio")}};
Blockly.Blocks.index_cput_ratio={init:function(){this.appendDummyInput().appendField("\u8ba1\u7b97\u6307\u6807\u5360\u6bd4\uff08\u6bcf\u5217\u5360\u7ed9\u5b9a\u503c\u7684\u6bd4\uff09");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendDummyInput().appendField("\u5360\u6bd4\u7684\u5206\u6bcd").appendField(new Blockly.FieldVariable("sumValue"),
"sumValue");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"Ratio");this.setColour(INDEXS_HUE);this.setTooltip("\u8ba1\u7b97\u6307\u6807\u5360\u6bd4(\u5360\u6bd4\u7684\u5206\u6bcd\u662f\u7ed9\u5b9a\u7684\u503c)");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-cput-ratio")}};
Blockly.Blocks.index_col_get={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u67e5\u8be2\u7ed3\u679c\u7684\u67d0\u4e2a\u6307\u6807\u503c\u6216\u8005\u503c\u5217\u8868");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("indexAlias"),"indexAlias");this.setOutput(!0,null);this.setColour(INDEXS_HUE);
this.setTooltip("\u83b7\u53d6\u67e5\u8be2\u7ed3\u679c\u7684\u6307\u6807\u503c\u6216\u8005\u6307\u6807\u503c\u5217\u8868");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-col-get")}};
Blockly.Blocks.index_col_get_by_ref={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u67e5\u8be2\u7ed3\u679c\u7684\u67d0\u4e2a\u6307\u6807\u503c\u6216\u8005\u503c\u5217\u8868");this.appendDummyInput().appendField("\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("indexAlias").setCheck(["Reference","String"]).appendField("\u6307\u6807\u522b\u540d");this.setOutput(!0,null);this.setColour(INDEXS_HUE);this.setTooltip("\u83b7\u53d6\u67e5\u8be2\u7ed3\u679c\u7684\u6307\u6807\u503c\u6216\u8005\u6307\u6807\u503c\u5217\u8868");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-col-get-by-ref")}};
Blockly.Blocks.index_en_get={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u6307\u6807\u522b\u540d\u5bf9\u5e94\u7684\u6307\u6807\u82f1\u6587\u540d");this.appendValueInput("indexAlias").setCheck(["String","Reference"]).appendField("\u6307\u6807\u522b\u540d");this.appendDummyInput().appendField("\u6307\u6807\u96c6\u5408").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.setOutput(!0,"String");this.setColour(INDEXS_HUE);this.setInputsInline(!1);this.setTooltip("\u83b7\u53d6\u6307\u6807\u522b\u540d\u5bf9\u5e94\u7684\u6307\u6807\u82f1\u6587\u540d");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-en-get")}};
Blockly.Blocks.index_filtered_by_group={init:function(){this.appendDummyInput().appendField("\u901a\u8fc7\u5206\u7ec4\u8fc7\u6ee4\u51fa\u4e00\u6279\u6307\u6807\uff0c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("groupIndexs"),"groupIndexs");this.appendDummyInput().appendField("\u6307\u6807\u5168\u96c6").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendValueInput("groupName").setCheck(["String","Reference"]).appendField("\u5206\u7ec4\u540d\u79f0");this.appendDummyInput().appendField("\u662f\u5426\u5305\u62ec\u65e0\u5206\u7ec4\u6307\u6807").appendField(new Blockly.FieldCheckbox("TRUE"),
"containsNoGroup");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"IndexFilter");this.setColour(INDEXS_HUE);this.setTooltip("\u901a\u8fc7\u5206\u7ec4\u8fc7\u6ee4\u51fa\u4e00\u6279\u6307\u6807");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-filtered-by-group")}};
Blockly.Blocks.index_is_in_group={init:function(){this.appendDummyInput().appendField("\u6307\u6807\u6216\u8005\u6307\u6807\u6570\u7ec4\u662f\u5426\u5168\u90e8\u5728\u67d0\u4e2a\u5206\u7ec4\u4e0b");this.appendDummyInput().appendField("\u6307\u6807\u5168\u96c6").appendField(new Blockly.FieldVariable("indexs"),"indexs");this.appendValueInput("indexsBeJudged").setCheck(["String","Reference","List"]).appendField("\u5f85\u5224\u65ad\u7684\u6307\u6807\uff08\u6216\u6307\u6807\u96c6\u5408\uff09");this.appendDummyInput().appendField("\u662f\u5426\u5224\u65ad\u5728\u67d0\u4e2a\u5206\u7ec4\u4e0b").appendField(new Blockly.FieldCheckbox("TRUE",
this.isInGroup.bind(this)),"isInGroup");this.setOutput(!0,"Boolean");this.setColour(INDEXS_HUE);this.setTooltip("\u5224\u65ad\u6307\u6807(\u591a\u4e2a\u6307\u6807\u4ee5\u9017\u53f7\u9694\u5f00)\u6216\u8005\u6307\u6807\u6570\u7ec4\u662f\u5426\u5168\u90e8\u5728\u67d0\u4e2a\u5206\u7ec4\u4e0b\uff0c\u5982\u679c\u662f\u65e0\u5206\u7ec4\u6307\u6807\u90a3\u4e48\u5c5e\u4e8e\u4efb\u4f55\u5206\u7ec4\u4e0b");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-is-in-group")},mutationToDom:function(){var a=
document.createElement("mutation"),b="TRUE"==this.getFieldValue("isInGroup");a.setAttribute("is_in_group",b);return a},domToMutation:function(a){a="true"==a.getAttribute("is_in_group");this.isInGroup(a)},isInGroup:function(a){var b=this.getInput("groupName");a?b||this.appendValueInput("groupName").setCheck(["String","Reference"]).appendField("\u5206\u7ec4\u540d\u79f0"):b&&this.removeInput("groupName",!0)}};
Blockly.Blocks.index_add_merge={init:function(){this.appendDummyInput().appendField("\u5408\u5e76\u6570\u636e\uff08\u76f8\u540c\u6307\u6807\u76f8\u52a0\uff09\u5230\u6211\u7684\u67e5\u8be2\u7ed3\u679c\u96c6\u4e0b");this.appendDummyInput().appendField("\u6211\u7684\u67e5\u8be2\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u5f85\u5408\u5e76\u6570\u636e\u96c6").appendField(new Blockly.FieldVariable("mergedResult"),"mergedResult");
var a=new Blockly.FieldCheckbox("FALSE",function(a){this.sourceBlock_.updateShape_(a)}),a=new Blockly.FieldCheckbox("FALSE",function(a){this.sourceBlock_.updateShape_(a)});this.appendValueInput("excluded").setCheck(["String","Reference"]).appendField("\u4e0d\u53c2\u4e0e\u8ba1\u7b97\u7684\u6307\u6807\uff08\u591a\u4e2a\u7528\u82f1\u6587\u9017\u53f7\u9694\u5f00\uff09");this.appendDummyInput().appendField("\u7ed3\u679c\u96c6\u662f\u5426\u662f\u591a\u6761\u6570\u636e").appendField(a,"isMultiLine");this.setPreviousStatement(!0,
null);this.setNextStatement(!0,"MergeRival");this.setColour(INDEXS_HUE);this.setTooltip("\u5408\u5e76\u6570\u636e\u5230\u6211\u7684\u6570\u636e\u96c6\u4e0b\uff0c\u76f8\u540c\u7684\u6307\u6807\u6267\u884c\u52a0\u6cd5\u7b97\u6cd5");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/index-add-merge")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isMultiLine");a.setAttribute("is_multiline",b);return a},domToMutation:function(a){a="true"==
a.getAttribute("is_multiline");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("indexAlias");a?b||this.appendDummyInput("indexAlias").appendField("\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8bb0\u5f55\u7684\u6307\u6807\u522b\u540d").appendField(new Blockly.FieldTextInput("input index alias"),"indexAlias"):b&&this.removeInput("indexAlias",!0)}};var ITEM_HUE=20;
Blockly.Blocks.item_model={init:function(){this.appendDummyInput().appendField("\u5b9d\u8d1d\u6a21\u578b");this.appendDummyInput().appendField(new Blockly.FieldCheckbox("TRUE"),"title").appendField("\u6807\u9898").appendField(new Blockly.FieldCheckbox("TRUE"),"itemId").appendField("\u5b9d\u8d1dID").appendField(new Blockly.FieldCheckbox("TRUE"),"picUrl").appendField("\u56fe\u7247URL").appendField(new Blockly.FieldCheckbox("TRUE"),"detailUrl").appendField("\u8be6\u60c5\u9875URL").appendField(new Blockly.FieldCheckbox("FALSE"),"userId").appendField("\u5e97\u94faUserID");
this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),"categoryId").appendField("\u7c7b\u76eeID").appendField(new Blockly.FieldCheckbox("FALSE"),"quantity").appendField("\u5e93\u5b58").appendField(new Blockly.FieldCheckbox("FALSE"),"reservePrice").appendField("\u53d1\u5e03\u4ef7\u683c").appendField(new Blockly.FieldCheckbox("FALSE"),"discountPrice").appendField("\u4fc3\u9500\u4ef7\u683c").appendField(new Blockly.FieldCheckbox("FALSE"),"isMallItem").appendField("\u662f\u5426\u5929\u732b\u5546\u54c1");
this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),"startDate").appendField("\u53d1\u5e03\u65e5\u671f").appendField(new Blockly.FieldCheckbox("FALSE"),"isOnline").appendField("\u662f\u5426\u5728\u7ebf").appendField(new Blockly.FieldCheckbox("FALSE"),"city").appendField("\u6240\u5728\u57ce\u5e02").appendField(new Blockly.FieldCheckbox("FALSE"),"prov").appendField("\u6240\u5728\u7701\u4efd").appendField(new Blockly.FieldCheckbox("FALSE"),"endDate").appendField("\u7ed3\u675f\u65e5\u671f");
this.setInputsInline(!1);this.setOutput(!0,"ItemModel");this.setColour(ITEM_HUE);this.setTooltip("\u5b9d\u8d1d\u6a21\u578b\u83b7\u53d6\uff0c\u7528\u4e8e\u7b5b\u9009\u5b9d\u8d1d\u5c5e\u6027");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/item-model")}};
Blockly.Blocks.item_search={init:function(){this.appendDummyInput().appendField("\u5b9d\u8d1d\u641c\u7d22\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("items"),"items");this.appendValueInput("itemModel").setCheck("ItemModel").appendField("\u5b9d\u8d1d\u6a21\u578b");this.appendValueInput("keyword").setCheck(["String","Reference"]).appendField("\u641c\u7d22\u5173\u952e\u8bcd");this.appendValueInput("size").setCheck(["Number","Reference"]).appendField("\u641c\u7d22\u5b9d\u8d1d\u6570\u4e0a\u9650");
this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(ITEM_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/item-search")}};
Blockly.Blocks.item_get={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u5355\u4e2a(\u6279\u91cf)\u5b9d\u8d1d\u4fe1\u606f\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("item"),"item");this.appendValueInput("itemModel").setCheck("ItemModel").appendField("\u5b9d\u8d1d\u6a21\u578b");this.appendValueInput("itemId").setCheck(["Number","List","Reference"]).appendField("\u5b9d\u8d1dID\uff08ID\u5217\u8868\uff09");this.setInputsInline(!1);this.setPreviousStatement(!0,
null);this.setNextStatement(!0,null);this.setColour(ITEM_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/item-get")}};
Blockly.Blocks.item_merge={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u5b9d\u8d1d\u4fe1\u606f\u540e\u5408\u5e76\u5230").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u4e2d");this.appendValueInput("itemModel").setCheck("ItemModel").appendField("\u5b9d\u8d1d\u6a21\u578b");this.appendDummyInput().appendField("\u5408\u5e76ID(\u9ed8\u8ba4\u65e0\u9700\u4fee\u6539)").appendField(new Blockly.FieldTextInput("itemId"),"itemId");this.setInputsInline(!1);
this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(ITEM_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/item-merge")}};var KEYS_HUE=180;Blockly.Blocks.keys_string={init:function(){this.appendDummyInput().appendField("String").appendField(new Blockly.FieldTextInput("inputValue"),"value");this.setOutput(!0,"String");this.setColour(KEYS_HUE);this.setTooltip("\u521b\u5efaString\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-string")}};
Blockly.Blocks.keys_long={init:function(){this.appendDummyInput().appendField("Long").appendField(new Blockly.FieldNumber(0,-0x7ffffffffffffc00,0x7ffffffffffffc00),"value");this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("\u521b\u5efaLong\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-long")}};
Blockly.Blocks.keys_integer={init:function(){this.appendDummyInput().appendField("Integer").appendField(new Blockly.FieldNumber(0,-2147483648,2147483647),"value");this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("\u521b\u5efaInteger\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-integer")}};
Blockly.Blocks.keys_boolean={init:function(){this.appendDummyInput().appendField("Boolean").appendField(new Blockly.FieldDropdown([["true","TRUE"],["false","FALSE"]]),"value");this.setOutput(!0,"Boolean");this.setColour(KEYS_HUE);this.setTooltip("\u521b\u5efaBoolean\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-boolean")}};
Blockly.Blocks.keys_double={init:function(){this.appendDummyInput().appendField("Double").appendField(new Blockly.FieldNumber(0,-0x7ffffffffffffc00,0x7ffffffffffffc00,10),"value");this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("\u521b\u5efaDouble\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-double")}};
Blockly.Blocks.keys_strings={init:function(){this.appendDummyInput().appendField("String[]").appendField(new Blockly.FieldTextInput("input string array splited by ','"),"value");this.setOutput(!0,"String[]");this.setColour(KEYS_HUE);this.setTooltip("\u521b\u5efaString\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-strings")}};
Blockly.Blocks.keys_types={init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([["Long[]","Long[]"],["Integer[]","Integer[]"],["Double[]","Double[]"],["String[]","String[]"],["List<Long>","ListLong"],["List<Integer>","ListInteger"],["List<Double>","ListDouble"],["List<String>","ListString"],["String","String"],["Long","Long"],["Integer","Integer"],["Boolean","Boolean"],["Double","Double"],["Json","Json"]]),"types").appendField(new Blockly.FieldTextInput("inputValue"),"value");
var a=this;this.setOutput(!0,function(){return a.getFieldValue("types")});this.setColour(KEYS_HUE);this.setTooltip("\u521b\u5efa\u7279\u5b9a\u7c7b\u578b\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-types")}};
Blockly.Blocks.keys_array_2_list={init:function(){this.appendDummyInput().appendField("\u5c06\u6570\u7ec4\u5bf9\u8c61").appendField(new Blockly.FieldVariable("array"),"array").appendField("\u8f6c\u6210List\u5217\u8868");this.setOutput(!0,["ListLong","ListInteger","ListDouble","ListString"]);this.setColour(KEYS_HUE);this.setTooltip("\u5c06\u6570\u7ec4\u5bf9\u8c61\u8f6c\u6210List\u5217\u8868");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-array-2-list")}};
Blockly.Blocks.keys_null={init:function(){this.appendDummyInput().appendField("Null");this.setOutput(!0,null);this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-null")}};Blockly.Blocks.keys_current_date={init:function(){this.appendDummyInput().appendField("\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4");this.setOutput(!0,"Date");this.setColour(KEYS_HUE);this.setTooltip("\u83b7\u53d6\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-current-date")}};
Blockly.Blocks.keys_arithmetic={init:function(){this.jsonInit({message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:null},{type:"field_dropdown",name:"OP",options:[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"]]},{type:"input_value",name:"B",check:null}],inputsInline:!0,output:"Number",colour:KEYS_HUE,helpUrl:"http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-arithmetic"});
var a=this;this.setTooltip(function(){var b=a.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE}[b]})}};
Blockly.Blocks.keys_config_get={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u52a8\u6001\u914d\u7f6e\u9879\u503c");this.appendDummyInput().appendField("\u52a8\u6001\u914d\u7f6e\u7c7b\u578b").appendField(new Blockly.FieldDropdown([["String","String"],["Long","Long"],["Integer","Integer"],["Boolean","Boolean"],["Double","Double"],["Long[]","Long[]"],["Integer[]","Integer[]"],["Double[]","Double[]"],["String[]","String[]"],["List<Long>","ListLong"],["List<Integer>","ListInteger"],
["List<Double>","ListDouble"],["List<String>","ListString"],["Json","Json"]]),"types");this.appendValueInput("key").appendField("\u52a8\u6001\u914d\u7f6e\u9879Key").setCheck(["String","Reference"]);var a=this;this.setOutput(!0,function(){return a.getFieldValue("types")});this.setColour(KEYS_HUE);this.setTooltip("\u83b7\u53d6\u52a8\u6001\u914d\u7f6e\u9879\u503c");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-config-get")}};
Blockly.Blocks.keys_reference={init:function(){this.appendDummyInput().appendField("Reference").appendField(new Blockly.FieldVariable("item"),"key");this.setOutput(!0,"Reference");this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-reference")}};
Blockly.Blocks.keys_create_variable={init:function(){this.appendValueInput("value").appendField("\u521b\u5efa").appendField(new Blockly.FieldVariable("item"),"key").appendField("=");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-create-variable")}};
Blockly.Blocks.keys_assign_variable={init:function(){this.appendValueInput("value").appendField("\u521b\u5efa\u6216\u8d4b\u503c").appendField(new Blockly.FieldVariable("item"),"key").appendField("=");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-assign-variable")}};
Blockly.Blocks.keys_throw_exception={init:function(){this.appendDummyInput().appendField("\u629b\u5f02\u5e38");this.appendDummyInput().appendField("code").appendField(new Blockly.FieldTextInput("1001"),"code");this.appendDummyInput().appendField("message").appendField(new Blockly.FieldTextInput("error message"),"msg");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-throw-exception")}};
Blockly.Blocks.keys_variable_param={init:function(){this.appendValueInput("value").setCheck(null).appendField("\u521b\u5efa").appendField(new Blockly.FieldVariable("item"),"key").appendField("=");this.setOutput(!0,"Reference");this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-variable-param")}};
Blockly.Blocks.keys_login_user_id={init:function(){this.appendDummyInput().appendField("loginUserId");this.setOutput(!0,["String","Long","Integer"]);this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-login-user-id")}};Blockly.Blocks.keys_runas_user_id={init:function(){this.appendDummyInput().appendField("runAsUserId");this.setOutput(!0,["String","Number"]);this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-runas-user-id")}};
Blockly.Blocks.keys_runas_shop_id={init:function(){this.appendDummyInput().appendField("runAsShopId");this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-runas-shop-id")}};Blockly.Blocks.keys_main_user_id={init:function(){this.appendDummyInput().appendField("mainUserId");this.setOutput(!0,["String","Long","Integer"]);this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-main-user-id")}};
Blockly.Blocks.keys_is_b2c_shop={init:function(){this.appendDummyInput().appendField("isB2cShop");this.setOutput(!0,"Boolean");this.setColour(KEYS_HUE);this.setTooltip("\u662f\u5426B2C\u5356\u5bb6");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-is-b2c-shop")}};
Blockly.Blocks.keys_bc_seller={init:function(){this.appendDummyInput().appendField("bcSeller");this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("\u6dd8\u5b9d\u5356\u5bb6\u4e3a0\uff0c\u5929\u732b\u5356\u5bb6\u4e3a1");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-bc-seller")}};
Blockly.Blocks.keys_main1_cateid={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u4e3b\u8425\u4e00\u7ea7\u7c7b\u76eeID");this.appendValueInput("statDate").setCheck(["Reference","Date"]).appendField("\u7edf\u8ba1\u65e5\u671f");this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("\u5356\u5bb6\u4e3b\u8425\u4e00\u7ea7\u7c7b\u76eeID");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-main1-cateid")}};
Blockly.Blocks.keys_main2_cateid={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u4e3b\u8425\u4e8c\u7ea7\u7c7b\u76eeID");this.appendValueInput("statDate").setCheck(["Reference","Date"]).appendField("\u7edf\u8ba1\u65e5\u671f");this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("\u5356\u5bb6\u4e3b\u8425\u4e8c\u7ea7\u7c7b\u76eeID");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-main2-cateid")}};
Blockly.Blocks.keys_page_start_index={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u5206\u9875\u8d77\u59cb\u4e0b\u6807");this.appendDummyInput().appendField("\u9875\u7801").appendField(new Blockly.FieldVariable("page"),"page").appendField("\u6bcf\u9875\u8bb0\u5f55\u6570").appendField(new Blockly.FieldVariable("pageSize"),"pageSize");this.setInputsInline(!1);this.setOutput(!0,"Number");this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-page-start-index")}};
Blockly.Blocks.keys_string_concat={init:function(){this.appendDummyInput().appendField("\u5b57\u7b26\u4e32\u62fc\u63a5");this.appendDummyInput().appendField("\u62fc\u63a5\u5206\u9694\u7b26").appendField(new Blockly.FieldDropdown([["\u65e0",""],["\u9017\u53f7(,)",","],["\u4e2d\u5212\u7ebf(-)","-"],["\u4e0b\u5212\u7ebf(_)","_"],["\u5c0f\u6570\u70b9(.)","."],["\u7a7a\u683c"," "],["\u4e0d\u53ef\u89c1\u5b57\u7b26char6","char6"]]),"split");this.appendValueInput("strings").appendField("\u5f85\u62fc\u63a5\u7684\u5b57\u7b26\u4e32");
this.setInputsInline(!1);this.setOutput(!0,"String");this.setColour(KEYS_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-string-concat")}};
Blockly.Blocks.keys_array={init:function(){this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-array");this.setColour(KEYS_HUE);this.itemCount_=3;this.updateShape_();this.setOutput(!0,"List");this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip("\u521b\u5efa\u6570\u7ec4\u53c2\u6570")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),
10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("ADD"+b).connection.targetConnection;
c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"ADD"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=0;a<this.itemCount_;a++)this.getInput("ADD"+
a)||this.appendValueInput("ADD"+a);for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++}};
Blockly.Blocks.keys_map={init:function(){this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/keys-map");this.setColour(KEYS_HUE);this.itemCount_=3;this.updateShape_();this.setOutput(!0,"Map");this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip("\u521b\u5efa\u6761\u4ef6\u53c2\u6570")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),
10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();for(b=0;b<this.itemCount_;b++){var c=this.getInput("ADD"+b).connection.targetConnection;
c&&-1==a.indexOf(c)&&c.disconnect()}this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"ADD"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=0;a<this.itemCount_;a++)this.getInput("ADD"+
a)||this.appendValueInput("ADD"+a).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldTextInput("key"),"KEY"+a);for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++}};Blockly.Blocks.logics={};Blockly.Blocks.logics.HUE=210;
Blockly.Blocks.logic_if={init:function(){this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/logic-if");this.setColour(Blockly.Blocks.logics.HUE);this.appendValueInput("IF0").setCheck(["Boolean","Reference"]).appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendStatementInput("DO0").appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var a=this;this.setTooltip(function(){if(a.elseifCount_||
a.elseCount_){if(!a.elseifCount_&&a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_2;if(a.elseifCount_&&!a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_3;if(a.elseifCount_&&a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_4}else return Blockly.Msg.CONTROLS_IF_TOOLTIP_1;return""});this.elseCount_=this.elseifCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var a=document.createElement("mutation");this.elseifCount_&&a.setAttribute("elseif",this.elseifCount_);
this.elseCount_&&a.setAttribute("else",1);return a},domToMutation:function(a){this.elseifCount_=parseInt(a.getAttribute("elseif"),10)||0;this.elseCount_=parseInt(a.getAttribute("else"),10)||0;this.updateShape_()},decompose:function(a){var b=a.newBlock("controls_if_if");b.initSvg();for(var c=b.nextConnection,d=1;d<=this.elseifCount_;d++){var e=a.newBlock("controls_if_elseif");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}this.elseCount_&&(a=a.newBlock("controls_if_else"),a.initSvg(),
c.connect(a.previousConnection));return b},compose:function(a){var b=a.nextConnection.targetBlock();this.elseCount_=this.elseifCount_=0;a=[null];for(var c=[null],d=null;b;){switch(b.type){case "controls_if_elseif":this.elseifCount_++;a.push(b.valueConnection_);c.push(b.statementConnection_);break;case "controls_if_else":this.elseCount_++;d=b.statementConnection_;break;default:throw"Unknown block type.";}b=b.nextConnection&&b.nextConnection.targetBlock()}this.updateShape_();for(b=1;b<=this.elseifCount_;b++)Blockly.Mutator.reconnect(a[b],
this,"IF"+b),Blockly.Mutator.reconnect(c[b],this,"DO"+b);Blockly.Mutator.reconnect(d,this,"ELSE")},saveConnections:function(a){a=a.nextConnection.targetBlock();for(var b=1;a;){switch(a.type){case "controls_if_elseif":var c=this.getInput("IF"+b),d=this.getInput("DO"+b);a.valueConnection_=c&&c.connection.targetConnection;a.statementConnection_=d&&d.connection.targetConnection;b++;break;case "controls_if_else":d=this.getInput("ELSE");a.statementConnection_=d&&d.connection.targetConnection;break;default:throw"Unknown block type.";
}a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var a=1;this.getInput("IF"+a);)this.removeInput("IF"+a),this.removeInput("DO"+a),a++;for(a=1;a<=this.elseifCount_;a++)this.appendValueInput("IF"+a).setCheck(["Boolean","Reference"]).appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+a).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)}};
Blockly.Blocks.controls_if_if={init:function(){this.setColour(Blockly.Blocks.logics.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_IF_TITLE_IF);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_elseif={init:function(){this.setColour(Blockly.Blocks.logics.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_else={init:function(){this.setColour(Blockly.Blocks.logics.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.logic_compare={init:function(){this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/logic-compare");this.setColour(Blockly.Blocks.logics.HUE);this.setOutput(!0,"Boolean");this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown([["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"],["in","IN"],["not in","NIN"],["contains","CTNS"]]),"OP");this.setInputsInline(!0);var a=this;this.setTooltip(function(){var b=
a.getFieldValue("OP");return{EQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE}[b]});this.prevBlocks_=[null,null]}};
Blockly.Blocks.logic_operation={init:function(){var a=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,"OR"]];this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/logic-operation");this.setColour(Blockly.Blocks.logics.HUE);this.setOutput(!0,"Boolean");this.appendValueInput("A").setCheck(["Boolean","Reference"]);this.appendValueInput("B").setCheck(["Boolean","Reference"]).appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=
b.getFieldValue("OP");return{AND:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,OR:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR}[a]})}};Blockly.Blocks.logic_negate={init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NEGATE_TITLE,args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",colour:Blockly.Blocks.logics.HUE,tooltip:Blockly.Msg.LOGIC_NEGATE_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NEGATE_HELPURL})}};
Blockly.Blocks.logic_boolean={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]]}],output:"Boolean",colour:Blockly.Blocks.logics.HUE,tooltip:Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_BOOLEAN_HELPURL})}};
Blockly.Blocks.logic_null={init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NULL,output:null,colour:Blockly.Blocks.logics.HUE,tooltip:Blockly.Msg.LOGIC_NULL_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NULL_HELPURL})}};
Blockly.Blocks.logic_if_then_else={init:function(){this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/logic-if-then-else");this.setColour(Blockly.Blocks.logics.HUE);this.appendValueInput("if").appendField("if").setCheck(["Boolean","Reference"]);this.appendValueInput("then").appendField("then").setCheck(null);this.appendValueInput("else").appendField("else").setCheck(null);this.setOutput(!0);this.setInputsInline(!0)}};
Blockly.Blocks.logic_try_catch={init:function(){this.appendStatementInput("try").setCheck(null).appendField("try");this.appendStatementInput("catch").setCheck(null).appendField("catch");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setMutator(new Blockly.Mutator(["logic_finally"]));this.finallyCount_=0;this.setColour(120);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/logic-try-catch")},mutationToDom:function(){if(!this.finallyCount_)return null;
var a=document.createElement("mutation");this.finallyCount_&&a.setAttribute("finally",1);return a},domToMutation:function(a){this.finallyCount_=parseInt(a.getAttribute("finally"),10)||0;this.updateShape_()},decompose:function(a){var b=a.newBlock("logic_try");b.initSvg();var c=b.nextConnection;this.finallyCount_&&(a=a.newBlock("logic_finally"),a.initSvg(),c.connect(a.previousConnection));return b},compose:function(a){a=a.nextConnection.targetBlock();this.finallyCount_=0;for(var b=null;a;){switch(a.type){case "logic_finally":this.finallyCount_++;
b=a.statementConnection_;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}this.updateShape_();Blockly.Mutator.reconnect(b,this,"FINALLY")},saveConnections:function(a){for(a=a.nextConnection.targetBlock();a;){switch(a.type){case "logic_finally":var b=this.getInput("FINALLY");a.statementConnection_=b&&b.connection.targetConnection;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.getInput("FINALLY")&&
this.removeInput("FINALLY");this.finallyCount_&&this.appendStatementInput("FINALLY").appendField("finally")}};Blockly.Blocks.logic_finally={init:function(){this.setColour(Blockly.Blocks.logics.HUE);this.appendDummyInput().appendField("finally");this.setPreviousStatement(!0);this.setTooltip("finally an exception");this.contextMenu=!1}};
Blockly.Blocks.logic_try={init:function(){this.setColour(Blockly.Blocks.logics.HUE);this.appendDummyInput().appendField("try");this.setNextStatement(!0);this.setTooltip("try{...}catch{...}finally{...}");this.contextMenu=!1}};Blockly.Blocks.loop={};Blockly.Blocks.loop.HUE=130;
Blockly.Blocks.loop_foreach={init:function(){this.jsonInit({message0:"for each item %1 in %2",args0:[{type:"field_variable",name:"item",variable:"item"},{type:"input_value",name:"queryResult",check:["Map","List","Reference"]}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loop.HUE,helpUrl:"http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/loop-foreach"});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_FOREACH_INPUT_DO);var a=this;this.setTooltip(function(){return Blockly.Msg.CONTROLS_FOREACH_TOOLTIP.replace("%1",
a.getFieldValue("item"))})}};
Blockly.Blocks.loop_flow_statements={init:function(){var a=[[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,"BREAK"],[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,"CONTINUE"]];this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/loop-flow-statements");this.setColour(Blockly.Blocks.loop.HUE);this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"FLOW");this.setPreviousStatement(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("FLOW");return{BREAK:Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,
CONTINUE:Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}[a]})},onchange:function(a){if(!this.workspace.isDragging()){a=!1;var b=this;do{if(-1!=this.LOOP_TYPES.indexOf(b.type)){a=!0;break}b=b.getSurroundParent()}while(b);a?(this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText("\u8be5\u5361\u7247\u53ea\u80fd\u7528\u5728\u5faa\u73af\u5185"),this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))}},LOOP_TYPES:["loop_foreach"]};var PARAM_HUE=345;Blockly.Blocks.param_input={init:function(){this.appendDummyInput().appendField("\u8f93\u5165\u53c2\u6570\u5b9a\u4e49");this.appendValueInput("param").setCheck("List").setAlign(Blockly.ALIGN_RIGHT).appendField("\u5165\u53c2");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"ParamInput");this.setColour(PARAM_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-input")}};
Blockly.Blocks.param_string={init:function(){this.appendDummyInput("param").appendField("String").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"String");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaString\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-string")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_long={init:function(){this.appendDummyInput("param").appendField("Long").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Number");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaLong\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-long")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_integer={init:function(){this.appendDummyInput("param").appendField("Integer").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Number");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaInteger\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-integer")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_boolean={init:function(){this.appendDummyInput("param").appendField("Boolean").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Boolean");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaBoolean\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-boolean")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_double={init:function(){this.appendDummyInput("param").appendField("Double").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Number");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaDouble\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-double")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_device={init:function(){this.appendDummyInput("param").appendField("Device").appendField(new Blockly.FieldVariable("device"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Device");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaDevice\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-device")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_date={init:function(){this.appendDummyInput("param").appendField("Date").appendField(new Blockly.FieldVariable("date"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Date");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaDate\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-date")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_strings={init:function(){this.appendDummyInput().appendField("String[]").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull");this.appendDummyInput("param").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"String[]");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaString\u53c2\u6570");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-strings")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&
this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_longs={init:function(){this.appendDummyInput().appendField("Long[]").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull");this.appendDummyInput("param").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Long[]");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaLong\u53c2\u6570");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-longs")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_integers={init:function(){this.appendDummyInput().appendField("Integer[]").appendField(new Blockly.FieldVariable("keyName"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull");this.appendDummyInput("param").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Integer[]");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaInteger\u53c2\u6570");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-integers")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&
this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_devices={init:function(){this.appendDummyInput().appendField("Device[]").appendField(new Blockly.FieldVariable("devices"),"key").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull");this.appendDummyInput("param").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"Device[]");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efaDevice\u53c2\u6570");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-devices")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&
this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_statdate={init:function(){this.appendDummyInput().setAlign(Blockly.ALIGN_LEFT).appendField("\u65f6\u95f4\u5468\u671f\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod");this.appendDummyInput().setAlign(Blockly.ALIGN_LEFT).appendField("Date Range").appendField(new Blockly.FieldTextInput("dateRange"),"dateRange").appendField("\u4e0d\u9a8c\u8bc1\u7ed3\u675f\u65f6\u95f4").appendField(new Blockly.FieldCheckbox("FALSE"),"endDateNoVerify");
this.appendDummyInput().setAlign(Blockly.ALIGN_LEFT).appendField("Date Type").appendField(new Blockly.FieldTextInput("dateType"),"dateType").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"dateTypeNotNull").appendField("\u81ea\u5b9a\u4e49\u6821\u9a8c\u65f6\u95f4\u8303\u56f4").appendField(new Blockly.FieldCheckbox("FALSE",this.verify.bind(this)),"verify");this.setOutput(!0,"DatePeriod");this.setColour(PARAM_HUE);this.setTooltip("\u521b\u5efa\u65f6\u95f4\u5468\u671f\u53c2\u6570");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-statdate")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("verify");a.setAttribute("verify",b);return a},domToMutation:function(a){a="true"==a.getAttribute("verify");this.verify(a)},verify:function(a){var b=this.getInput("verify");a&&!b?this.appendDummyInput("verify").appendField("\u65e5").appendField(new Blockly.FieldTextInput("90"),"day").appendField("\uff0c\u5468").appendField(new Blockly.FieldTextInput("24"),
"week").appendField("\uff0c\u6708").appendField(new Blockly.FieldTextInput("13"),"month").appendField("\u8fde\u7eed\u65e5").appendField(new Blockly.FieldTextInput("30"),"rangeDay").appendField("\uff0c\u8fde\u7eed\u5468").appendField(new Blockly.FieldTextInput("3"),"rangeWeek").appendField("\uff0c\u8fde\u7eed\u6708").appendField(new Blockly.FieldTextInput("3"),"rangeMonth").appendField("\uff0c\u5b63\u5ea6").appendField(new Blockly.FieldTextInput("8"),"quarter").appendField("\uff0c\u5e74").appendField(new Blockly.FieldTextInput("3"),
"year"):!a&&b&&this.removeInput("verify")}};
Blockly.Blocks.param_indexcode={init:function(){this.appendDummyInput("param").appendField("\u6307\u6807\u4e32").appendField(new Blockly.FieldVariable("indexCode"),"indexCode").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"String[]");this.setColour(PARAM_HUE);this.setTooltip("\u89e3\u6790\u9700\u8981\u7684\u6307\u6807\uff0c\u591a\u4e2a\u6307\u6807\u7528\u9017\u53f7\u5206\u9694\uff0c\u89e3\u6790\u540e\u8fd4\u56deString\u6570\u7ec4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-indexcode")},
mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_indexcode_extra={init:function(){this.appendDummyInput("param").appendField("\u6307\u6807\u4e32").appendField(new Blockly.FieldVariable("indexCode"),"indexCode").appendField("\u989d\u5916\u5fc5\u4f20\u6307\u6807").appendField(new Blockly.FieldTextInput("extraFields"),"extraFields").appendField("\u9ed8\u8ba4\u503c").appendField(new Blockly.FieldCheckbox("FALSE",this.hasDefault.bind(this)),"hasDefault");this.setOutput(!0,"String[]");this.setColour(PARAM_HUE);this.setTooltip("\u89e3\u6790\u9700\u8981\u7684\u6307\u6807\uff0c\u591a\u4e2a\u6307\u6807\u7528\u9017\u53f7\u5206\u9694\uff0c\u989d\u5916\u6307\u6807\u8868\u793a\u6240\u6709\u8bf7\u6c42\u90fd\u6dfb\u52a0\u8fd9\u4e9b\u6307\u6807\uff0c\u89e3\u6790\u540e\u8fd4\u56deString\u6570\u7ec4");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-indexcode-extra")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasDefault");a.setAttribute("has_default",b);return a},domToMutation:function(a){a="true"==a.getAttribute("has_default");this.hasDefault(a)},hasDefault:function(a){a?this.getField("defaultValue")||this.getInput("param").appendField(new Blockly.FieldTextInput("defaultValue"),"defaultValue"):this.getField("defaultValue")&&
this.getInput("param").removeField("defaultValue")}};
Blockly.Blocks.param_verify={init:function(){var a=new Blockly.FieldDropdown([["\u53d6\u503c\u8303\u56f4","range"],["\u5b9d\u8d1d\u6743\u9650","item"],["\u7c7b\u76ee\u6743\u9650","cate"],["\u54c1\u724c\u6743\u9650","brand"],["\u7c7b\u76ee\u54c1\u724c\u6743\u9650","cateBrand"]],function(a){this.sourceBlock_.updateShape_(a)});this.appendDummyInput("verifyType").appendField("\u53c2\u6570\u5408\u6cd5\u6027\u6821\u9a8c\uff08\u5355\u5e97\u7248\uff09").appendField(a,"verifyType");this.setOutput(!0,null);
this.setColour(PARAM_HUE);this.setTooltip("\u53c2\u6570\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u53c2\u6570\u7684\u5408\u6cd5\u6027");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/param-verify")},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("verifyType");a.setAttribute("verify_type",b);return a},domToMutation:function(a){a=a.getAttribute("verify_type");this.updateShape_(a)},updateShape_:function(a){this.removeInput("verifyParam",!0);this.removeInput("cateFlag",
!0);"range"===a?this.appendValueInput("verifyParam").appendField("\u53d6\u503c\u8303\u56f4(\u591a\u4e2a\u4ee5\u9017\u53f7\u9694\u5f00)").appendField(new Blockly.FieldTextInput("1,2,3"),"range"):"item"===a?this.appendDummyInput("verifyParam").appendField("\u5b9d\u8d1dID").appendField(new Blockly.FieldVariable("itemId"),"itemId").appendField("\u662f\u5426\u5fc5\u4f20").appendField(new Blockly.FieldCheckbox("TRUE"),"notNull"):"cate"===a?(this.appendDummyInput("verifyParam").appendField("\u7c7b\u76eeID").appendField(new Blockly.FieldVariable("cateId"),
"cateId"),this.appendValueInput("cateFlag").setCheck(["Number","Reference"]).appendField("\u7c7b\u76ee\u5c42\u7ea7")):"brand"===a?this.appendDummyInput("verifyParam").appendField("\u54c1\u724cID").appendField(new Blockly.FieldVariable("brandId"),"brandId"):"cateBrand"===a&&(this.appendDummyInput("verifyParam").appendField("\u54c1\u724cID").appendField(new Blockly.FieldVariable("brandId"),"brandId").appendField("\u7c7b\u76eeID").appendField(new Blockly.FieldVariable("cateId"),"cateId"),this.appendValueInput("cateFlag").setCheck(["Number",
"Reference"]).appendField("\u7c7b\u76ee\u5c42\u7ea7"))}};var RESULT_HUE=315;Blockly.Blocks.result_to_map_list={init:function(){this.appendDummyInput().appendField("\u8d8b\u52bf\u7ed3\u679c\u8f6c\u6362").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(RESULT_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/result-to-map-list")}};
Blockly.Blocks.result_trend_fill_null={init:function(){this.appendDummyInput().appendField("\u8d8b\u52bf\u7ed3\u679c\u586b\u5145null");this.appendDummyInput().appendField("\u8d8b\u52bf\u7ed3\u679c\u5bf9\u8c61").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("size").appendField("\u8d8b\u52bf\u5217\u8868\u957f\u5ea6\uff08\u4e0d\u8db3\u8be5\u957f\u5ea6\u8865null\uff09").setCheck(["Number","Reference"]);this.setPreviousStatement(!0,null);this.setNextStatement(!0,
null);this.setColour(RESULT_HUE);this.setTooltip("\u8d8b\u52bf\u7ed3\u679c\u586b\u5145null");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/result-trend-fill-null")}};Blockly.Blocks.result_return={init:function(){this.appendDummyInput().appendField("\u7ed3\u679c\u8fd4\u56de").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.setPreviousStatement(!0,null);this.setColour(RESULT_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/result-return")}};
Blockly.Blocks.result_return_empty={init:function(){this.appendDummyInput().appendField("\u7a7a\u7ed3\u679c\u8fd4\u56de").appendField(new Blockly.FieldDropdown([["\u7a7a\u5217\u8868","emptylist"],["\u7a7aMap","emptymap"],["\u7a7a\u5206\u9875\u7ed3\u679c","emptypage"],["\u7a7a\u5bf9\u8c61(null)","null"],["\u5f53\u524d\u7cfb\u7edf\u65e5\u671f(yyyy-MM-dd)","currentdate"]]),"emptyType");this.setPreviousStatement(!0,null);this.setColour(RESULT_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/result-return-empty")}};
Blockly.Blocks.result_excel_download={init:function(){this.appendStatementInput("sheets").setCheck("excel").appendField("Excel\u4e0b\u8f7d");this.appendValueInput("title").setCheck(["String","Reference"]).appendField("Excel\u6587\u4ef6\u540d");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setColour(RESULT_HUE);this.setTooltip("Excel\u4e0b\u8f7d\uff0c\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2aSheet");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/result-excel-download")}};
Blockly.Blocks.result_sheet_content={init:function(){this.appendDummyInput().appendField("Excel Sheet\u5185\u5bb9");this.appendValueInput("sheet").setCheck(["String","Reference"]).appendField("Sheet\u540d\u79f0");this.appendValueInput("desc").setCheck(["String","Reference"]).appendField("\u8bf4\u660e");this.appendValueInput("linkText").setCheck(["String","Reference"]).appendField("\u94fe\u63a5\u6587\u6848");this.appendValueInput("linkAddress").setCheck(["String","Reference"]).appendField("\u94fe\u63a5\u5730\u5740");
this.appendValueInput("hint").setCheck(["List","String","Reference"]).appendField("\u63d0\u793a\u4fe1\u606f");this.appendDummyInput().appendField("\u7ed3\u679c\u96c6\uff08\u9700\u8981\u662f\u5217\u8868\u7c7b\u578b\uff09").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendValueInput("indexCode").setCheck(["List"]).appendField("\u6307\u6807\u5e8f\u5217\uff08\u5177\u6709\u987a\u5e8f\uff09");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,
null);this.setColour(RESULT_HUE);this.setTooltip("Excel\u4e0b\u8f7d\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6307\u6807\u683c\u5f0f\u4e3a\uff1a\u82f1\u6587\u540d^\u4e2d\u6587\u540d^\u683c\u5f0f\u5316\u4e32\uff0c\u683c\u5f0f\u5316\u4e32\u53ef\u4ee5\u4e0d\u63d0\u4f9b\uff0c\u8be6\u60c5\u67e5\u770bHelp\u6587\u6863");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/result-sheet-content")},onchange:function(a){(a=this.getSurroundParent())&&-1!=this.EXCEL_TYPES.indexOf(a.type)?(this.setWarningText(null),
this.isInFlyout||this.setDisabled(!1)):(this.setWarningText("Excel Sheet\u53ea\u80fd\u653e\u5728Excel\u4e0b\u8f7d\u4e2d"),this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))},EXCEL_TYPES:["result_excel_download"]};Blockly.Blocks.result_card_get={init:function(){this.appendDummyInput().appendField("\u9875\u9762\u5361\u7247\u8fd4\u56de");this.setPreviousStatement(!0,null);this.setColour(RESULT_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/result-card-get")}};Blockly.Blocks.rmi={};Blockly.Blocks.rmi.HUE=200;
Blockly.Blocks.rmi_hsf_generic_call={init:function(){this.appendDummyInput().appendField("HSF\u6cdb\u5316\u8c03\u7528\uff0c\u8c03\u7528\u7ed3\u679c\u8d4b\u4e88").appendField(new Blockly.FieldVariable("callResult"),"callResult");this.appendDummyInput().appendField("\u63a5\u53e3\u540d\u79f0").appendField(new Blockly.FieldTextInput("com.taobao.uic.common.service.userinfo.UicReadService"),"interfaceName");this.appendDummyInput().appendField("\u65b9\u6cd5\u540d\u79f0").appendField(new Blockly.FieldTextInput("getUserIdByNick"),"methodName").appendField("\u8d85\u65f6\u65f6\u95f4\uff08\u6beb\u79d2\uff09").appendField(new Blockly.FieldTextInput("3000"),
"timeout");this.appendValueInput("version").setCheck("String").appendField("\u7248\u672c\u53f7");this.appendValueInput("group").setCheck("String").appendField("\u5206\u7ec4");this.appendValueInput("argsType").appendField("\u65b9\u6cd5\u53c2\u6570\u7c7b\u578b").setCheck("List");this.appendValueInput("argsVal").appendField("\u65b9\u6cd5\u53c2\u6570\u503c").setCheck("List");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(Blockly.Blocks.rmi.HUE);this.setTooltip("HSF\u6cdb\u5316\u8c03\u7528");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/rmi-hsf-generic-call")}};Blockly.Blocks.scripting={};Blockly.Blocks.scripting.HUE=123;
Blockly.Blocks.scripting_for_each={init:function(){this.appendDummyInput().appendField("\u5bf9\u7ed3\u679c\u5bf9\u8c61\u96c6\u5408").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u8fdb\u884cforeach\u64cd\u4f5c");this.appendDummyInput().appendField("foreach\u5904\u7406\u811a\u672c").appendField(new Blockly.FieldTextArea(""),"script");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(Blockly.Blocks.scripting.HUE);this.setTooltip("\u7ed3\u679c\u5bf9\u8c61\u96c6\u5408.foreach(function($item)->{<\u8f93\u5165\u811a\u672c>})");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/scripting-for-each")}};
Blockly.Blocks.scripting_reduce={init:function(){this.appendDummyInput().appendField("\u5bf9\u7ed3\u679c\u5bf9\u8c61\u96c6\u5408").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u8fdb\u884c\u805a\u5408\u64cd\u4f5c");this.appendDummyInput().appendField("reduce\u5904\u7406\u811a\u672c").appendField(new Blockly.FieldTextArea(""),"script");this.appendDummyInput().appendField("\u8f93\u51fa\u7ed3\u679c").appendField(new Blockly.FieldVariable("reducedResult"),"reducedResult");
this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(Blockly.Blocks.scripting.HUE);this.setTooltip("\u8f93\u51fa\u7ed3\u679c = \u7ed3\u679c\u5bf9\u8c61\u96c6\u5408.reduce(function($item)->{<\u8f93\u5165\u811a\u672c>})");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/scripting-reduce")}};
Blockly.Blocks.scripting_map={init:function(){this.appendDummyInput().appendField("\u5bf9\u7ed3\u679c\u5bf9\u8c61\u96c6\u5408").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u8fdb\u884cmap\u64cd\u4f5c");this.appendDummyInput().appendField("map\u5904\u7406\u811a\u672c").appendField(new Blockly.FieldTextArea(""),"script");this.appendDummyInput().appendField("\u8f93\u51fa\u7ed3\u679c").appendField(new Blockly.FieldVariable("mappedResult"),"mappedResult");this.setPreviousStatement(!0,
null);this.setNextStatement(!0,null);this.setColour(Blockly.Blocks.scripting.HUE);this.setTooltip("\u8f93\u51fa\u7ed3\u679c = \u7ed3\u679c\u5bf9\u8c61\u96c6\u5408.map(function($item)->{<\u8f93\u5165\u811a\u672c>})");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/scripting-map")}};
Blockly.Blocks.scripting_engine={init:function(){this.appendDummyInput().appendField("\u811a\u672c\u8c03\u7528\uff0c\u8c03\u7528\u7ed3\u679c\u5982\u6709\u8fd4\u56de\u503c\u5219\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("callResult"),"callResult");this.appendDummyInput().appendField("\u811a\u672c\u7c7b\u578b").appendField(new Blockly.FieldDropdown([["JavaScript","js"],["Groovy","groovy"]]),"type");this.appendDummyInput().appendField("\u5904\u7406\u7ed3\u679c\u96c6").appendField(new Blockly.FieldVariable("queryResult"),
"queryResult");this.appendDummyInput().appendField("\u5904\u7406\u811a\u672c").appendField(new Blockly.FieldTextArea(""),"script");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.itemCount_=0;this.updateShape_();this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setColour(Blockly.Blocks.scripting.HUE);this.setTooltip("\u8c03\u7528\u52a8\u6001\u811a\u672c\uff0c\u5982\u679c\u6ca1\u6709\u8fd4\u56de\u503c\u90a3\u4e48\u8f93\u51fa\u7ed3\u679c\u53d8\u91cf\u4e3a null");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/scripting-engine")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");e.initSvg();
c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)Blockly.Mutator.reconnect(a[b],this,"ADD"+b)},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")&&this.removeInput("EMPTY");for(var a=0;a<this.itemCount_;a++)this.getInput("ADD"+a)||this.appendDummyInput("ADD"+
a).appendField("\u811a\u672c\u5176\u5b83\u5165\u53c2").appendField(new Blockly.FieldVariable("queryResult"),"PARAM"+a).setAlign(Blockly.ALIGN_RIGHT);for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++}};var SHOP_HUE=200;
Blockly.Blocks.shop_model={init:function(){this.appendDummyInput().appendField("\u5e97\u94fa\u6a21\u578b");this.appendDummyInput().appendField(new Blockly.FieldCheckbox("TRUE"),"title").appendField("\u6807\u9898").appendField(new Blockly.FieldCheckbox("TRUE"),"userId").appendField("\u5e97\u94faID").appendField(new Blockly.FieldCheckbox("TRUE"),"pictureUrl").appendField("\u56fe\u7247URL").appendField(new Blockly.FieldCheckbox("TRUE"),"shopUrl").appendField("\u8be6\u60c5\u9875URL");this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),
"b2CShop").appendField("\u662f\u5426\u5929\u732b\u5e97\u94fa").appendField(new Blockly.FieldCheckbox("FALSE"),"category").appendField("\u7c7b\u76eeID").appendField(new Blockly.FieldCheckbox("FALSE"),"starts").appendField("\u521b\u5efa\u65f6\u95f4").appendField(new Blockly.FieldCheckbox("FALSE"),"productCount").appendField("\u5728\u552e\u5546\u54c1\u6570");this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),"approveStatus").appendField("\u5e97\u94fa\u72b6\u6001").appendField(new Blockly.FieldCheckbox("FALSE"),
"address").appendField("\u6240\u5728\u5730").appendField(new Blockly.FieldCheckbox("FALSE"),"city").appendField("\u6240\u5728\u57ce\u5e02").appendField(new Blockly.FieldCheckbox("FALSE"),"province").appendField("\u6240\u5728\u7701\u4efd");this.setInputsInline(!1);this.setOutput(!0,"ShopModel");this.setColour(SHOP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/shop-model")}};
Blockly.Blocks.shop_search={init:function(){this.appendDummyInput().appendField("\u5e97\u94fa\u641c\u7d22\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("shops"),"shops");this.appendValueInput("shopModel").setCheck("ShopModel").appendField("\u5e97\u94fa\u6a21\u578b");this.appendValueInput("keyword").setCheck(["String","Reference"]).appendField("\u641c\u7d22\u5173\u952e\u8bcd");this.appendValueInput("size").setCheck(["String","Reference"]).appendField("\u641c\u7d22\u5e97\u94fa\u6570\u4e0a\u9650");
this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(SHOP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/shop-search")}};
Blockly.Blocks.shop_get={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u5355\u4e2a\uff08\u6279\u91cf\uff09\u5e97\u94fa\u4fe1\u606f\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("shop"),"shop");this.appendValueInput("shopModel").setCheck("ShopModel").appendField("\u5e97\u94fa\u6a21\u578b");this.appendValueInput("userId").setCheck(["Number","Reference"]).appendField("\u5e97\u94faID\uff08ID\u5217\u8868\uff09");this.setInputsInline(!1);this.setPreviousStatement(!0,
null);this.setNextStatement(!0,null);this.setColour(SHOP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/shop-get")}};
Blockly.Blocks.shop_merge={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u5e97\u94fa\u4fe1\u606f\u540e\u5408\u5e76\u5230").appendField(new Blockly.FieldVariable("queryResult"),"queryResult").appendField("\u4e2d");this.appendValueInput("shopModel").setCheck("ShopModel").appendField("\u5e97\u94fa\u6a21\u578b");this.appendDummyInput().appendField("\u5408\u5e76ID(\u9ed8\u8ba4\u65e0\u9700\u4fee\u6539)").appendField(new Blockly.FieldTextInput("userId"),"userId");this.setInputsInline(!1);
this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(SHOP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/shop-merge")}};Blockly.Blocks.shop_get_shopid_by_userid={init:function(){this.appendDummyInput().appendField("\u901a\u8fc7userId\u83b7\u53d6shopId\uff0cuserId\u53d8\u91cf").appendField(new Blockly.FieldVariable("userId"),"userId");this.setOutput(!0,"Number");this.setColour(SHOP_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/shop-get-shopid-by-userid")}};
Blockly.Blocks.shop_map_shopid_by_userid={init:function(){this.appendDummyInput().appendField("\u901a\u8fc7userId\u6279\u91cf\u83b7\u53d6Map<userId,shopId>\u96c6\u5408\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("user2ShopIds"),"user2ShopIds");this.appendValueInput("userIds").setCheck(["List","Reference"]).appendField("userId\u5217\u8868");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(SHOP_HUE);this.setTooltip("");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/shop-map-shopid-by-userid")}};var STATDATE_HUE=285;
Blockly.Blocks.statdate_variable={init:function(){this.appendDummyInput("dateVariable").appendField("\u901a\u8baf\u8868\u540d\u79f0\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("statDate"),"dateVariable");this.appendDummyInput().appendField("\u901a\u8baf\u8868\u65f6\u95f4\u7c7b\u578b").appendField(new Blockly.FieldDropdown([["day","day"],["1day","1day"],["nday","nday"],["week","week"],["month","month"],["quarter","quarter"],["year","year"],["hh","hh"]]),"commType");
this.appendDummyInput("statDateName").appendField("\u901a\u8baf\u8868\u540d\u79f0").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerStatDateName.bind(this)),"hasStatDateName");this.appendDummyInput("isDatePeriod").appendField("\u662f\u5426\u8fd4\u56de\u65f6\u95f4\u5468\u671f\u7c7b\u578b").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerDatePeriod.bind(this)),"isDatePeriod");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(STATDATE_HUE);this.setTooltip("\u901a\u8baf\u8868\u65e5\u671f\u83b7\u53d6");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-variable")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("hasStatDateName");a.setAttribute("has_stat_date_name",b);b="TRUE"==this.getFieldValue("isDatePeriod");a.setAttribute("is_date_period",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("has_stat_date_name");this.handlerStatDateName(b);a="true"==a.getAttribute("is_date_period");this.handlerDatePeriod(a)},
handlerStatDateName:function(a){var b=this.getInput("statDateName"),c=this.getField("statDateName");a?c||b.appendField(new Blockly.FieldTextInput("input statDate name"),"statDateName"):c&&b.removeField("statDateName")},handlerDatePeriod:function(a){var b=this.getInput("dateVariable"),c=this.getField("dateVariable");a?(c?"statDate"==c.getValue()&&(b.removeField("dateVariable"),b.appendField(new Blockly.FieldVariable("datePeriod"),"dateVariable")):b.appendField(new Blockly.FieldVariable("datePeriod"),
"dateVariable"),this.getField("periodType")||this.getInput("isDatePeriod").appendField(new Blockly.FieldDropdown([["\u81ea\u7136\u65e5","day"],["\u81ea\u7136\u5468","week"],["\u81ea\u7136\u6708","month"],["\u81ea\u7136\u5b63\u5ea6","quarter"],["\u81ea\u7136\u5e74","year"],["\u6700\u8fd11\u5929\uff08\u65e5\u5747\uff09","recent1"],["\u6700\u8fd17\u5929\uff08\u65e5\u5747\uff09","recent7"],["\u6700\u8fd130\u5929\uff08\u65e5\u5747\uff09","recent30"],["\u8fde\u7eed\u81ea\u7136\u65e5","range"],["\u8fde\u7eed\u81ea\u7136\u5468",
"rangeWeek"],["\u8fde\u7eed\u81ea\u7136\u6708","rangeMonth"]]),"periodType")):(this.getField("periodType")&&this.getInput("isDatePeriod").removeField("periodType"),c)?"datePeriod"==c.getValue()&&(b.removeField("dateVariable"),b.appendField(new Blockly.FieldVariable("statDate"),"dateVariable")):b.appendField(new Blockly.FieldVariable("statDate"),"dateVariable")}};
Blockly.Blocks.statdate_pre_period={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u4e2d\u83b7\u53d6\u524d\u4e00\u4e2a\u65f6\u95f4\u5468\u671f");this.setOutput(!0,"DatePeriod");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u5468\u671f\u4e2d\u83b7\u53d6\u524d\u4e00\u4e2a\u65f6\u95f4\u5468\u671f");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-pre-period")}};
Blockly.Blocks.statdate_trend_convert={init:function(){this.appendDummyInput().appendField("\u5c06\u6700\u8fd1N\u5929\u65f6\u95f4\u5468\u671f").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u8f6c\u6210\u6700\u8fd11\u5929\u65f6\u95f4\u5468\u671f");this.setOutput(!0,"DatePeriod");this.setColour(STATDATE_HUE);this.setTooltip("\u5c06\u6700\u8fd1N\u5929\u65f6\u95f4\u5468\u671f\u8f6c\u6210\u6700\u8fd11\u5929\u65f6\u95f4\u5468\u671f");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-trend-convert")}};
Blockly.Blocks.statdate_trend_pre_period={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u5468\u671f").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u524d\u4e00\u4e2a\u8d8b\u52bf\u7684\u65f6\u95f4\u5468\u671f").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerTrendSize.bind(this)),"trendSize").appendField("\u81ea\u5b9a\u4e49\u914d\u7f6e\u8d8b\u52bf\u5929\u6570");this.setOutput(!0,"DatePeriod");this.setColour(STATDATE_HUE);
this.setTooltip("\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u5468\u671f\u7684\u524d\u4e00\u4e2a\u8d8b\u52bf\u7684\u65f6\u95f4\u5468\u671f");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-trend-pre-period")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("trendSize");a.setAttribute("trend_size",b);return a},domToMutation:function(a){a="true"==a.getAttribute("trend_size");this.handlerTrendSize(a)},handlerTrendSize:function(a){var b=
this.getInput("trendSize");a&&!b?this.appendDummyInput("trendSize").appendField("\u65e5").appendField(new Blockly.FieldNumber(30,0,1E3),"day").appendField("\uff0c\u5468").appendField(new Blockly.FieldNumber(24,0,1E3),"week").appendField("\uff0c\u6708").appendField(new Blockly.FieldNumber(13,0,1E3),"month").appendField("\uff0c\u5b63\u5ea6").appendField(new Blockly.FieldNumber(8,0,1E3),"quarter").appendField("\uff0c\u5e74").appendField(new Blockly.FieldNumber(3,0,1E3),"year"):!a&&b&&this.removeInput("trendSize")}};
Blockly.Blocks.statdate_from_period={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u4e2d\u83b7\u53d6\u7ed3\u675f\u65e5\u671f");this.setOutput(!0,"Date");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u5468\u671f\u4e2d\u83b7\u53d6\u901a\u8baf\u8868\u65e5\u671f");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-from-period")}};
Blockly.Blocks.statdate_start_from_period={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u4e2d\u83b7\u53d6\u8d77\u59cb\u65e5\u671f");this.setOutput(!0,"Date");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u5468\u671f\u4e2d\u83b7\u53d6\u8d77\u59cb\u65f6\u95f4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-start-from-period")}};
Blockly.Blocks.statdate_between_days={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6").appendField(new Blockly.FieldVariable("startDate"),"startDate").appendField("\u548c").appendField(new Blockly.FieldVariable("endDate"),"endDate").appendField("\u4e4b\u95f4\u76f8\u9694\u7684\u5929\u6570");this.setOutput(!0,"Number");this.setColour(STATDATE_HUE);this.setTooltip("\u83b7\u53d6\u8d77\u6b62\u65f6\u95f4\u76f8\u9694\u7684\u5929\u6570\uff0c\u5305\u62ec\u8d77\u6b62\u65f6\u95f4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-between-days")}};
Blockly.Blocks.statdates_from_period={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u4e2d\u83b7\u53d6\u9ed8\u8ba4\u7684\u5386\u53f2\u8d8b\u52bf\u65f6\u95f4\u5217\u8868").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerTrendSize.bind(this)),"trendSize").appendField("\u81ea\u5b9a\u4e49\u914d\u7f6e\u8d8b\u52bf\u5929\u6570");this.setOutput(!0,"ListDate");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u5468\u671f\u4e2d\u83b7\u53d6\u9ed8\u8ba4\u7684\u5386\u53f2\u8d8b\u52bf\u65f6\u95f4\u5217\u8868");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdates-from-period")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("trendSize");a.setAttribute("trend_size",b);return a},domToMutation:function(a){a="true"==a.getAttribute("trend_size");this.handlerTrendSize(a)},handlerTrendSize:function(a){var b=this.getInput("trendSize");a&&!b?this.appendDummyInput("trendSize").appendField("\u65e5").appendField(new Blockly.FieldNumber(30,0,
1E3),"day").appendField("\uff0c\u5468").appendField(new Blockly.FieldNumber(24,0,1E3),"week").appendField("\uff0c\u6708").appendField(new Blockly.FieldNumber(13,0,1E3),"month").appendField("\uff0c\u5b63\u5ea6").appendField(new Blockly.FieldNumber(8,0,1E3),"quarter").appendField("\uff0c\u5e74").appendField(new Blockly.FieldNumber(3,0,1E3),"year"):!a&&b&&this.removeInput("trendSize")}};
Blockly.Blocks.statdate_start_of_period_list={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u4e2d\u83b7\u53d6\u9ed8\u8ba4\u7684\u5386\u53f2\u8d8b\u52bf\u65f6\u95f4\u5217\u8868\u7684\u8d77\u59cb\u65f6\u95f4").appendField(new Blockly.FieldCheckbox("FALSE",this.handlerTrendSize.bind(this)),"trendSize").appendField("\u81ea\u5b9a\u4e49\u914d\u7f6e\u8d8b\u52bf\u5929\u6570");this.setOutput(!0,"Date");this.setColour(STATDATE_HUE);
this.setTooltip("\u4ece\u65f6\u95f4\u5468\u671f\u4e2d\u83b7\u53d6\u9ed8\u8ba4\u7684\u5386\u53f2\u8d8b\u52bf\u65f6\u95f4\u5217\u8868\u7684\u8d77\u59cb\u65f6\u95f4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-start-of-period-list")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("trendSize");a.setAttribute("trend_size",b);return a},domToMutation:function(a){a="true"==a.getAttribute("trend_size");this.handlerTrendSize(a)},
handlerTrendSize:function(a){var b=this.getInput("trendSize");a&&!b?this.appendDummyInput("trendSize").appendField("\u65e5").appendField(new Blockly.FieldNumber(30,0,1E3),"day").appendField("\uff0c\u5468").appendField(new Blockly.FieldNumber(24,0,1E3),"week").appendField("\uff0c\u6708").appendField(new Blockly.FieldNumber(13,0,1E3),"month").appendField("\uff0c\u5b63\u5ea6").appendField(new Blockly.FieldNumber(8,0,1E3),"quarter").appendField("\uff0c\u5e74").appendField(new Blockly.FieldNumber(3,0,
1E3),"year"):!a&&b&&this.removeInput("trendSize")}};
Blockly.Blocks.statdates_sync_cycle_from_period={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u4e2d\u83b7\u53d6").appendField(new Blockly.FieldDropdown([["\u5f53\u524d\u5468\u671f\u65f6\u95f4\u548c\u4e0a\u5468\u671f\u65f6\u95f4\u5217\u8868","periods"],["\u5f53\u524d\u5468\u671f\u65f6\u95f4\u548c\u73af\u6bd4\u65f6\u95f4\u5217\u8868","cycles"],["\u5f53\u524d\u5468\u671f\u65f6\u95f4\u548c\u540c\u6bd4\u65f6\u95f4\u5217\u8868","syncs"],
["\u5f53\u524d\u5468\u671f\u65f6\u95f4\u548c\u73af\u6bd4\u548c\u540c\u6bd4\u65f6\u95f4\u5217\u8868","cycle_syncs"],["\u4e0a\u5468\u671f\u65f6\u95f4","period"],["\u73af\u6bd4\u65f6\u95f4","cycle"],["\u540c\u6bd4\u65f6\u95f4","sync"]]),"type");this.setOutput(!0,"ListDate");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u5468\u671f\u4e2d\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u548c\u53bb\u5e74\u540c\u671f\u4ee5\u53ca\u4e0a\u4e00\u5468\u671f\u7684\u65f6\u95f4\uff0c\u7528\u4e8e\u8ba1\u7b97\u73af\u6bd4\u548c\u540c\u6bd4");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdates-sync-cycle-from-period")}};
Blockly.Blocks.statdate_add_days={init:function(){this.appendDummyInput().appendField("\u5bf9").appendField(new Blockly.FieldVariable("statDate"),"statDate").appendField("\u589e\u52a0");this.appendValueInput("days").setCheck(["Number","Reference"]);this.appendDummyInput().appendField("\u5929");this.setOutput(!0,"Date");this.setColour(STATDATE_HUE);this.setTooltip("\u5bf9\u7ed9\u5b9a\u65f6\u95f4\u589e\u52a0X\u5929\u540e\u8fd4\u56de");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-add-days")}};
Blockly.Blocks.statdate_start_of_day={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("statDate"),"statDate").appendField("\u4e2d\u5bf9\u5e94\u5929\u7684\u5f00\u59cb\u65f6\u95f4");this.setOutput(!0,"Date");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u4e2d\u83b7\u53d6\u5bf9\u5e94\u5929\u7684\u5f00\u59cb\u65f6\u95f4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-start-of-day")}};
Blockly.Blocks.statdate_end_of_day={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("statDate"),"statDate").appendField("\u4e2d\u5bf9\u5e94\u5929\u7684\u7ed3\u675f\u65f6\u95f4");this.setOutput(!0,"Date");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u4e2d\u83b7\u53d6\u5bf9\u5e94\u5929\u7684\u7ed3\u675f\u65f6\u95f4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-end-of-day")}};
Blockly.Blocks.statdate_get_hour_string={init:function(){this.appendDummyInput().appendField("\u4ece").appendField(new Blockly.FieldVariable("statDate"),"statDate").appendField("\u4e2d\u63d0\u53d6\u6240\u5728\u5c0f\u65f6\uff08\u8fd4\u56deString\u7c7b\u578b\uff09");this.appendDummyInput().appendField("\u4e0d\u8db32\u4f4d\u662f\u5426\u88650").appendField(new Blockly.FieldCheckbox("TRUE"),"fillZero");this.setOutput(!0,"String");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u4e2d\u83b7\u53d6\u6240\u5728\u5c0f\u65f6\uff0c\u8fd4\u56de\u7684\u683c\u5f0f\u662f01\uff0c11\u8fd9\u6837");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-get-hour-string")}};
Blockly.Blocks.statdate_2_now_hour_string_list={init:function(){this.appendDummyInput().appendField("\u51cc\u6668\u622a\u6b62\u5f53\u524d\u65f6\u95f4\u6240\u6709\u5c0f\u65f6String\u5217\u8868");this.appendDummyInput().appendField("\u4e0d\u8db32\u4f4d\u662f\u5426\u88650").appendField(new Blockly.FieldCheckbox("TRUE"),"fillZero");this.setOutput(!0,"ListString");this.setColour(STATDATE_HUE);this.setTooltip("\u51cc\u6668\u622a\u6b62\u5f53\u524d\u65f6\u95f4\u7684\u5c0f\u65f6\u5bf9\u5e94\u7684String\u5217\u8868\uff0c\u8fd4\u56de\u7684\u683c\u5f0f\u662f[01,02,03,04,05]\u8fd9\u6837");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-2-now-hour-string-list")}};
Blockly.Blocks.statdate_2_now_hour_date_list={init:function(){this.appendDummyInput().appendField("\u51cc\u6668\u622a\u6b62\u5f53\u524d\u65f6\u95f4\u6240\u6709\u5c0f\u65f6Date\u5217\u8868");this.setOutput(!0,"ListDate");this.setColour(STATDATE_HUE);this.setTooltip("\u51cc\u6668\u622a\u6b62\u5f53\u524d\u65f6\u95f4\u7684\u5c0f\u65f6\u5bf9\u5e94\u7684Date\u5217\u8868");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-2-now-hour-date-list")}};
Blockly.Blocks.statdate_2_day_hour_list={init:function(){this.appendDummyInput().appendField("\u4e00\u5929\u5f00\u59cb\u65f6\u95f4\u5230").appendField(new Blockly.FieldVariable("statDate"),"statDate").appendField("\u4e4b\u95f4\u7684\u5c0f\u65f6\u5bf9\u5e94\u7684Date\u5217\u8868");this.setOutput(!0,"ListDate");this.setColour(STATDATE_HUE);this.setTooltip("\u8fd4\u56de\u7ed9\u5b9a\u65f6\u95f4\u5929\u7684\u5f00\u59cb\u5230\u7ed9\u5b9a\u65f6\u95f4\u7684\u5c0f\u65f6\u65f6\u95f4\u6570\u7ec4");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-2-day-hour-list")}};
Blockly.Blocks.statdate_2_day_hour_string_list={init:function(){this.appendDummyInput().appendField("\u4e00\u5929\u5f00\u59cb\u65f6\u95f4\u5230").appendField(new Blockly.FieldVariable("statDate"),"statDate").appendField("\u4e4b\u95f4\u7684\u5c0f\u65f6\u5bf9\u5e94\u7684String\u5217\u8868");this.appendDummyInput().appendField("\u4e0d\u8db32\u4f4d\u662f\u5426\u88650").appendField(new Blockly.FieldCheckbox("TRUE"),"fillZero");this.setOutput(!0,"ListString");this.setColour(STATDATE_HUE);this.setTooltip("\u8fd4\u56de\u7ed9\u5b9a\u65f6\u95f4\u5929\u7684\u5f00\u59cb\u5230\u7ed9\u5b9a\u65f6\u95f4\u7684\u5c0f\u65f6\u65f6\u95f4\u6570\u7ec4");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-2-day-hour-string-list")}};
Blockly.Blocks.statdate_format={init:function(){this.appendDummyInput().appendField("\u5bf9").appendField(new Blockly.FieldVariable("statDate"),"statDate").appendField("\u683c\u5f0f\u5316\u4e3a").appendField(new Blockly.FieldDropdown([["yyyy-MM-dd","yyyy-MM-dd"],["yyyy-MM-dd HH:mm:ss ","yyyy-MM-dd HH:mm:ss"],["yyyy-MM","yyyy-MM"]]),"format");this.setOutput(!0,"String");this.setColour(STATDATE_HUE);this.setTooltip("\u683c\u5f0f\u5316\u65f6\u95f4\u53d8\u91cf");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdate-format")}};
Blockly.Blocks.statdates_size_from_period={init:function(){this.appendDummyInput().appendField("\u83b7\u53d6\u65f6\u95f4\u5468\u671f").appendField(new Blockly.FieldVariable("datePeriod"),"datePeriod").appendField("\u5bf9\u5e94\u7684\u5929\u6570\u5b9a\u4e49");this.appendDummyInput("trendSize").appendField("\u65e5").appendField(new Blockly.FieldNumber(30,0,1E3),"day").appendField("\uff0c\u5468").appendField(new Blockly.FieldNumber(24,0,1E3),"week").appendField("\uff0c\u6708").appendField(new Blockly.FieldNumber(13,
0,1E3),"month").appendField("\uff0c\u5b63\u5ea6").appendField(new Blockly.FieldNumber(8,0,1E3),"quarter").appendField("\uff0c\u5e74").appendField(new Blockly.FieldNumber(3,0,1E3),"year");this.setOutput(!0,"DaySize");this.setColour(STATDATE_HUE);this.setTooltip("\u4ece\u65f6\u95f4\u5468\u671f\u4e2d\u83b7\u53d6\u5bf9\u5e94\u5929\u6570\u5b9a\u4e49");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/statdates-size-from-period")}};var UTIL_HUE=255;
Blockly.Blocks.util_call={init:function(){this.appendDummyInput().appendField("\u8c03\u7528\u81ea\u5b9a\u4e49\u65b9\u6cd5\uff0c\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("callResult"),"callResult").appendField("\u4e2d");this.appendDummyInput().appendField("\u7c7b\u540d\u79f0(\u5305\u62ec\u5305\u540d\u79f0)").appendField(new Blockly.FieldTextInput("className"),"className");this.appendDummyInput().appendField("\u65b9\u6cd5\u540d\u79f0").appendField(new Blockly.FieldTextInput("methodName"),"methodName");
this.appendDummyInput("springBean").appendField("\u662f\u5426Spring Bean(\u975e\u9759\u6001\u65b9\u6cd5)").appendField(new Blockly.FieldCheckbox("FALSE"),"isSpringBean");this.appendValueInput("params").setCheck("List").appendField("\u65b9\u6cd5\u5165\u53c2\uff08\u5177\u6709\u987a\u5e8f\uff09");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(UTIL_HUE);this.setTooltip("\u8c03\u7528\u81ea\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u8981\u6c42\u7c7b\u4e2d\u4e0d\u80fd\u591f\u6709\u540c\u540d\u7684\u65b9\u6cd5,\u5e76\u4e14\u65b9\u6cd5\u5bf9\u5e94\u7684\u4fee\u9970\u7b26\u662fpublic\u7684");
this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-call")}};Blockly.Blocks.util_debug={init:function(){this.appendValueInput("params").setCheck("Map").appendField("Debug");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"Debug");this.setColour(UTIL_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-debug")}};
Blockly.Blocks.util_log={init:function(){this.appendValueInput("params").setCheck("Map").appendField("Log");this.setPreviousStatement(!0,null);this.setNextStatement(!0,"Log");this.setColour(UTIL_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-log")}};
Blockly.Blocks.util_cache={init:function(){this.appendDummyInput().appendField("\u662f\u5426\u5f00\u542f\u7f13\u5b58(Tair)").appendField(new Blockly.FieldCheckbox("TRUE"),"useCache");this.appendDummyInput().appendField("\u7f13\u5b58\u65f6\u95f4(\u79d2)").appendField(new Blockly.FieldTextInput("43200"),"cacheTime");this.appendValueInput("keys").setCheck("List").appendField("\u7f13\u5b58Key\u5217\u8868");this.appendStatementInput("cacheStatement").setCheck(null);this.appendValueInput("values").setCheck("Reference").appendField("\u7f13\u5b58\u53d8\u91cf");
this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(UTIL_HUE);this.setTooltip("");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-cache")}};
Blockly.Blocks.util_parallel_struct={init:function(){this.appendStatementInput("parallelStatement").setCheck("ParallelStatement").appendField("\u5e76\u884c\u6846\u67b6");this.setInputsInline(!1);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(UTIL_HUE);this.setTooltip("\u5e76\u884c\u6846\u67b6,\u6240\u6709\u5728\u8be5\u6846\u67b6\u5185\u7684\u8bed\u53e5\u5c06\u5e76\u884c\u5904\u7406\uff0c\u8bf7\u786e\u5b9a\u8fd9\u4e9b\u8bed\u53e5\u6ca1\u6709\u5148\u540e\u6267\u884c\u5173\u7cfb");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-parallel-struct")}};
Blockly.Blocks.util_parallel_statement={init:function(){this.appendStatementInput("serialStatement").setCheck(null).appendField("\u5e76\u884c\u8bed\u53e5");this.setInputsInline(!1);this.setPreviousStatement(!0,"ParallelStatement");this.setNextStatement(!0,"ParallelStatement");this.setColour(UTIL_HUE);this.setTooltip("\u5e76\u884c\u8bed\u53e5\uff0c\u53ea\u6709\u7528\u5728\u5e76\u884c\u6846\u67b6\u5185\u624d\u8d77\u4f5c\u7528");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-parallel-statement")},
onchange:function(a){a=!1;var b=this;do{if(-1!=this.PARALLEL_STRUCT_TYPES.indexOf(b.type)){a=!0;break}b=b.getSurroundParent()}while(b);a?(this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText("\u5e76\u884c\u8bed\u53e5\u53ea\u80fd\u653e\u5728\u5e76\u884c\u6846\u67b6\u4e2d"),this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))},PARALLEL_STRUCT_TYPES:["util_parallel_struct"]};
Blockly.Blocks.util_reference={init:function(){this.appendDummyInput().appendField("\u4e1a\u52a1\u903b\u8f91\u7247\u6bb5\u8c03\u7528\uff0c\u4e1a\u52a1\u903b\u8f91\u7247\u6bb5\u540d\u79f0\uff1a").appendField(new Blockly.FieldTextInput("segment"),"segment");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(UTIL_HUE);this.setTooltip("\u4e1a\u52a1\u903b\u8f91\u7247\u6bb5\u8c03\u7528");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-reference")}};
Blockly.Blocks.util_function_call={init:function(){this.appendDummyInput().appendField("\u8c03\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\u540e\u7ed3\u679c\u8d4b\u4e88\u53d8\u91cf").appendField(new Blockly.FieldVariable("queryResult"),"queryResult");this.appendDummyInput().appendField("\u51fd\u6570\u540d\u79f0").appendField(new Blockly.FieldTextInput("methodName"),"methodName");this.appendValueInput("params").setCheck(["List"]).appendField("\u51fd\u6570\u5165\u53c2");this.appendDummyInput("isSelf").appendField("\u51fd\u6570\u662f\u5426\u4f4d\u4e8e\u5f53\u524d\u63a5\u53e3").appendField(new Blockly.FieldCheckbox("TRUE",
this.handlerIsSelf.bind(this)),"isSelf");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(UTIL_HUE);this.setTooltip("\u4e1a\u52a1\u51fd\u6570\u8c03\u7528");this.setHelpUrl("http://gitlab-sc.alibaba-inc.com/alidp/oneness/wikis/util-function-call")},mutationToDom:function(){var a=document.createElement("mutation"),b="TRUE"==this.getFieldValue("isSelf");a.setAttribute("is_self",b);return a},domToMutation:function(a){a="true"==a.getAttribute("is_self");this.handlerIsSelf(a)},
handlerIsSelf:function(a){var b=this.getInput("isSelf"),c=this.getField("segment");a?c&&b.removeField("segment"):c||b.appendField(new Blockly.FieldTextInput("\u8f93\u5165\u8c03\u7528\u7684RPC\u63a5\u53e3\u540d\u79f0"),"segment")},onchange:function(a){a=!0;var b=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(b.type)){a=!1;break}b=b.getSurroundParent()}while(b);a?(this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText("\u51fd\u6570\u8c03\u7528\u4e2d\u4e0d\u80fd\u518d\u8c03\u7528\u5176\u5b83\u51fd\u6570"),
this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))},FUNCTION_TYPES:["rpc_function"]};